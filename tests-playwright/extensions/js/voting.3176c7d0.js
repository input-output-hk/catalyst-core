"use strict";(this["webpackChunktyphon"]=this["webpackChunktyphon"]||[]).push([[329],{51188:function(e,t,n){n.r(t),n.d(t,{default:function(){return zn}});var a=n(66252),r=n(56612),i={class:"card flex flex-col w-full"},s={class:"ml-2 page-title labelColor3"},o={class:"mt-5 pt-10 px-5 pb-5 flex flex-col border border-primary-8 dark:border-dark-3 rounded-lg w-full max-w-screen-lg space-y-5"},l={class:"flex flex-col space-y-2"},c={key:0,class:"flex items-center space-x-3 p-3 text-red-500 dark:text-red-700 bg-red-100 dark:bg-dark rounded-md"},u={class:"text-xs"},p={key:1,class:"flex items-center space-x-3 p-3 text-red-500 dark:text-red-700 bg-red-100 dark:bg-dark rounded-md"},d={class:"text-xs"};function f(e,t,n,f,m,g){var v=(0,a.up)("font-awesome-icon"),x=(0,a.up)("catalyst-details-vue");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",s,(0,r.zw)(e.$t("votingRegistration")),1),(0,a._)("div",o,[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.activeComponent),{totalSteps:e.totalSteps,onChangeStep:e.changeComponent},null,40,["totalSteps","onChangeStep"])),(0,a._)("div",l,[e.isEnoughAdaForVoting?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",c,[(0,a.Wm)(v,{icon:"info-circle",class:"w-3.5 h-3.5 mr-0"}),(0,a._)("p",u,(0,r.zw)(e.$t("minAdaForVotingMessage2",{amount:e.$filters.formatADA(e.minAdaForVoting)})),1)])),e.showDelegateAdaMessage?((0,a.wg)(),(0,a.iD)("div",p,[(0,a.Wm)(v,{icon:"info-circle",class:"w-3.5 h-3.5 mr-0"}),(0,a._)("p",d,(0,r.zw)(e.$t("delegateADA")),1)])):(0,a.kq)("",!0)]),(0,a.Wm)(x)])])}var m=n(61372),g=(n(41539),n(92222),n(26699),n(32023),n(2262)),v=n(44431),x=n.n(v),w={class:"space-y-3"},h={class:"font-medium labelColor3"},b={class:"labelColor2 text-sm"},y={class:"flex flex-col sm:flex-row justify-end gap-x-2 md:gap-x-8 lg:gap-x-16 gap-y-8"},_={class:"flex flex-col items-center space-y-5"},k={class:"border dark:border-dark-3 p-4 rounded-lg shadow-sm"},S=(0,a._)("a",{href:"https://apps.apple.com/in/app/catalyst-voting/id1517473397",target:"_blank",class:"w-full max-w-max border dark:border-dark-3 p-4 rounded-lg shadow-sm"},[(0,a._)("img",{src:"/assets/app-store-download.svg",alt:"app store download icon",class:"w-full"})],-1),C={class:"flex flex-col items-center space-y-5"},A={class:"border dark:border-dark-3 p-4 rounded-lg shadow-sm"},$=(0,a._)("a",{href:"https://play.google.com/store/apps/details?id=io.iohk.vitvoting",target:"_blank",class:"w-full max-w-max border dark:border-dark-3 p-4 rounded-lg shadow-sm"},[(0,a._)("img",{src:"/assets/play-store-download.svg",alt:"play store download icon",class:"w-full"})],-1),z={class:"flex space-x-2"},D={class:"text-xs p-2 pr-3 flex space-x-2 btn btn-primary-outline items-center",disabled:""},R={class:"capitalize"},V=["disabled"];function T(e,t,n,i,s,o){var l=(0,a.up)("qrcode-vue"),c=(0,a.up)("font-awesome-icon"),u=(0,a.up)("voting-step");return(0,a.wg)(),(0,a.j4)(u,{activeStep:1,totalSteps:5},{stepInfo:(0,a.w5)((function(){return[(0,a._)("div",w,[(0,a._)("div",h,(0,r.zw)(e.$t("downloadCatalystApp")),1),(0,a._)("div",b,(0,r.zw)(e.$t("installApp")),1)])]})),body:(0,a.w5)((function(){return[(0,a._)("div",y,[(0,a._)("div",_,[(0,a._)("div",k,[(0,a.Wm)(l,{size:140,class:"border dark:border-white",value:"https://apps.apple.com/in/app/catalyst-voting/id1517473397"})]),S]),(0,a._)("div",C,[(0,a._)("div",A,[(0,a.Wm)(l,{size:140,class:"border dark:border-white",value:"https://play.google.com/store/apps/details?id=io.iohk.vitvoting"})]),$])])]})),actions:(0,a.w5)((function(){return[(0,a._)("div",z,[(0,a._)("button",D,[(0,a.Wm)(c,{icon:"angle-left",class:"w-3 h-3"}),(0,a._)("span",R,(0,r.zw)(e.$t("goBack")),1)]),(0,a._)("button",{class:"p-2 pl-3 text-xs flex items-center space-x-2 btn btn-primary focus:ring-2 focus:ring-offset-white focus:ring-offset-2",onClick:t[0]||(t[0]=function(){return e.$emit("changeStep",2)}),disabled:!e.isEnoughAdaForVoting||!e.isDelegated},[(0,a._)("span",null,(0,r.zw)(e.$t("continue")),1),(0,a.Wm)(c,{icon:"angle-right",class:"w-3 h-3"})],8,V)])]})),_:1})}var F={class:"flex flex-col md:grid md:grid-cols-8 md:gap-16 p-2"},Z={class:"md:col-span-3 flex flex-col mb-5 md:mb-0"},W={class:"text-primary"},I={class:"mt-5"},P={class:"md:col-span-5 flex flex-col space-y-10"},B={class:"w-full max-w-full"},M={class:"flex flex-col sm:flex-row items-center justify-between gap-5"},H={class:"flex items-center","aria-label":"Progress"},E={role:"list",class:"flex items-center space-x-4"},N={key:0,class:"block w-2.5 h-2.5 bg-primary rounded-full hover:bg-primary"},K={key:1,class:"relative flex items-center justify-center"},L=(0,a._)("span",{class:"absolute w-5 h-5 p-px flex","aria-hidden":"true"},[(0,a._)("span",{class:"w-full h-full rounded-full bg-primary-10 dark:bg-dark-3"})],-1),j=(0,a._)("span",{class:"relative block w-2.5 h-2.5 bg-primary rounded-full","aria-hidden":"true"},null,-1),q=[L,j],Q={key:2,class:"block w-2.5 h-2.5 bg-gray-200 dark:bg-dark-3 rounded-full"};function O(e,t,n,i,s,o){return(0,a.wg)(),(0,a.iD)("div",F,[(0,a._)("div",Z,[(0,a._)("div",W,"STEP 0"+(0,r.zw)(e.activeStep),1),(0,a._)("div",I,[(0,a.WI)(e.$slots,"stepInfo")])]),(0,a._)("div",P,[(0,a._)("div",B,[(0,a.WI)(e.$slots,"body")]),(0,a._)("div",M,[(0,a._)("div",null,[(0,a._)("nav",H,[(0,a._)("ol",E,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Array(e.totalSteps),(function(t,n){return(0,a.wg)(),(0,a.iD)("li",{key:n},[e.activeStep-1>n?((0,a.wg)(),(0,a.iD)("div",N)):e.activeStep-1===n?((0,a.wg)(),(0,a.iD)("div",K,q)):((0,a.wg)(),(0,a.iD)("div",Q))])})),128))])])]),(0,a._)("div",null,[(0,a.WI)(e.$slots,"actions")])])])])}n(9653);var X=(0,a.aZ)({props:{activeStep:Number,totalSteps:Number}}),U=n(83744);const G=(0,U.Z)(X,[["render",O]]);var Y=G,J=n(42976),ee=n.n(J),te=n(4e4),ne=(0,a.aZ)({components:{VotingStep:Y,QrcodeVue:ee()},emits:["changeStep"],setup:function(){var e=(0,te.X)(),t=(0,a.Fl)((function(){return e.activeAccount})),n=(0,a.Fl)((function(){var e=new(x())("500000000"),n=t.value.balance;return n.gte(e)})),r=(0,a.Fl)((function(){var e;return!(null===(e=t.value.poolInfo)||void 0===e||!e.poolId)}));return{isEnoughAdaForVoting:n,activeAccount:t,isDelegated:r}}});const ae=(0,U.Z)(ne,[["render",T]]);var re=ae,ie=(n(69600),{class:"mb-14 flex flex-col items-end"}),se={class:"flex space-x-5"},oe=(0,a._)("div",{class:"text-xs mt-1"},"â€‹",-1),le={class:"space-y-3"},ce={class:"font-medium labelColor3"},ue={class:"labelColor2 text-sm"},pe={class:"flex space-x-2"},de={class:"capitalize"},fe=["disabled"];function me(e,t,n,i,s,o){var l=(0,a.up)("single-digit-input-field"),c=(0,a.up)("font-awesome-icon"),u=(0,a.up)("VotingStep");return(0,a.wg)(),(0,a.j4)(u,{activeStep:2,totalSteps:e.totalSteps},{body:(0,a.w5)((function(){return[(0,a._)("div",ie,[(0,a._)("div",se,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(4,(function(t,n){return(0,a.Wm)(l,{key:n,onSetRef:function(t){t&&(e.inputRefs[n]=t)},onFocusPrevious:function(){e.changeFocus(n-1)},onInput:function(t){e.pinArray[n]=t,t&&e.changeFocus(n+1)},value:e.pinArray[n]?e.pinArray[n]:"",autofocus:0==n},null,8,["onSetRef","onFocusPrevious","onInput","value","autofocus"])})),64))]),oe])]})),stepInfo:(0,a.w5)((function(){return[(0,a._)("div",le,[(0,a._)("div",ce,(0,r.zw)(e.$t("createPIN")),1),(0,a._)("div",ue,(0,r.zw)(e.$t("pinDescription")),1)])]})),actions:(0,a.w5)((function(){return[(0,a._)("div",pe,[(0,a._)("button",{class:"text-xs p-2 pr-3 flex space-x-2 btn btn-primary-outline items-center focus:ring-2 focus:ring-offset-white focus:ring-offset-2",onClick:t[0]||(t[0]=function(){return e.$emit("changeStep",1)})},[(0,a.Wm)(c,{icon:"angle-left",class:"w-3 h-3"}),(0,a._)("span",de,(0,r.zw)(e.$t("goBack")),1)]),(0,a._)("button",{class:"p-2 pl-3 text-xs btn btn-primary focus:ring-2 focus:ring-offset-white focus:ring-offset-2 flex items-center space-x-2",onClick:t[1]||(t[1]=function(){return e.submit()}),disabled:4!==e.pinArray.join("").length},[(0,a._)("span",null,(0,r.zw)(e.$t("continue")),1),(0,a.Wm)(c,{icon:"angle-right",class:"w-3 h-3"})],8,fe)])]})),_:1},8,["totalSteps"])}n(21249);var ge=n(49963),ve=["autofocus"];function xe(e,t,n,r,i,s){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{class:"sm:w-20 w-14 p-2 sm:p-4 rounded-md text-xl sm:text-3xl font-medium text-center border border-primary-8 dark:border-dark shadow-sm input-text dark:bg-dark-3 labelColor3",type:"password",maxlength:"1",autofocus:e.autofocus,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.currentValue=t}),ref:function(t){e.$emit("setRef",t)},onKeydown:[t[1]||(t[1]=(0,ge.D2)((function(){return e.onEnter&&e.onEnter.apply(e,arguments)}),["enter"])),t[2]||(t[2]=(0,ge.D2)((function(){return e.onTab&&e.onTab.apply(e,arguments)}),["tab"])),t[3]||(t[3]=(0,ge.D2)((function(){return e.onBackspace&&e.onBackspace.apply(e,arguments)}),["delete"]))]},null,40,ve)),[[ge.nr,e.currentValue]])}n(24603),n(28450),n(74916),n(88386),n(39714),n(77601);var we=(0,a.aZ)({name:"SingleWordField",emits:["input","setRef","focusPrevious"],props:{value:{required:!0,type:String},autofocus:{type:Boolean}},data:function(){return{currentValue:this.$props.value}},watch:{currentValue:function(e){var t=new RegExp("^[0-9]+$");t.test(e)?this.$emit("input",e):(this.currentValue="",this.$emit("input",""))}},methods:{onBackspace:function(e){this.$props.value&&0!=this.$props.value.length||(this.$emit("focusPrevious"),e.preventDefault())}}});const he=(0,U.Z)(we,[["render",xe]]);var be=he,ye=n(48534),_e=(n(35666),n(67476)),ke=n(12778),Se=(n(51532),n(78783),n(33948),n(30907),n(70546)),Ce=(n(47042),n(21703),n(25632)),Ae=n(64855),$e=n(16732),ze=n(48764)["Buffer"],De=12983,Re=32,Ve="sha512",Te=ze.from("01","hex"),Fe=function(e,t){return new Promise((function(n,a){Ce.pbkdf2(e,t,De,Re,Ve,(function(e,t){if(e)return a(e);n(t)}))}))};function Ze(e,t){return We.apply(this,arguments)}function We(){return We=(0,ye.Z)(regeneratorRuntime.mark((function e(t,n){var a,r,i,s,o,l,c,u,p,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=ze.from((0,$e.Z)({length:32}),"hex"),r=ze.from((0,$e.Z)({length:24}),"hex"),i=ze.from(n),s=ze.from("","hex"),e.next=6,Fe(t,a);case 6:return o=e.sent,l=Ae.createCipher(o,r),l.setAAD(s,{plaintextLength:i.length}),c=l.update(i),u=l.final(),p=l.getAuthTag(),d=ze.concat([Te,a,r,c,u,p]),e.abrupt("return",d.toString("hex"));case 14:case"end":return e.stop()}}),e)}))),We.apply(this,arguments)}var Ie=n(64462),Pe=(n(48764)["Buffer"],function(){var e=(0,ye.Z)(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=(0,Ie.TO)(160),n=(0,Ie.Uz)(t),e.next=4,Se.Bip32PrivateKey.fromEntropy(n);case 4:return a=e.sent,e.abrupt("return",a.toPrivateKey());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());var Be=n(48764)["Buffer"],Me=(0,_e.Q_)("votingTransaction",(function(){var e=(0,te.X)(),t=(0,g.iH)([]),n=(0,g.iH)([]),a=(0,g.iH)(),r=void 0;function i(){return s.apply(this,arguments)}function s(){return s=(0,ye.Z)(regeneratorRuntime.mark((function r(){var i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Pe();case 2:return i=r.sent,s=(0,ke.getVotingMetadataForTx)(e.activeAccount,i),n.value=s.catalystRegistrationMetadata,r.next=7,Ze(Be.from(t.value),i.toBytes());case 7:return a.value=r.sent,r.abrupt("return",s.catalystRegistrationMetadata);case 9:case"end":return r.stop()}}),r)}))),s.apply(this,arguments)}return{computeVotingMetadata:i,encryptedPrivateKey:a,votingKeyPin:t,votingTx:r,metadataList:n}})),He=(0,a.aZ)({components:{VotingStep:Y,SingleDigitInputField:be},props:{totalSteps:{type:Number}},emits:["changeStep"],setup:function(e,t){var n=t.emit,r=Me(),i=(0,g.iH)([]),s=(0,g.iH)([]);(0,a.bv)((function(){i.value[0].focus()}));var o=function(e){if(!(e===i.value.length||e<0)){var t=i.value[e];t.focus()}},l=function(){4===s.value.length&&(r.$patch({votingKeyPin:s.value.map((function(e){return Number(e)}))}),n("changeStep",3))};return{changeFocus:o,pinArray:s,inputRefs:i,submit:l}}});const Ee=(0,U.Z)(He,[["render",me]]);var Ne=Ee,Ke={class:"mb-14 flex flex-col items-end"},Le={class:"flex space-x-5"},je={class:"space-y-3"},qe={class:"font-medium labelColor3"},Qe={class:"labelColor2 text-sm"},Oe={class:"flex space-x-2"},Xe=["disabled"],Ue={class:"capitalize"},Ge={class:"flex items-center space-x-2"};function Ye(e,t,n,i,s,o){var l=(0,a.up)("single-digit-input-field"),c=(0,a.up)("font-awesome-icon"),u=(0,a.up)("AppButtonVue"),p=(0,a.up)("VotingStep");return(0,a.wg)(),(0,a.j4)(p,{activeStep:3,totalSteps:e.totalSteps},{body:(0,a.w5)((function(){return[(0,a._)("div",Ke,[(0,a._)("div",Le,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(4,(function(t,n){return(0,a.Wm)(l,{key:n,onSetRef:function(t){t&&(e.inputRefs[n]=t)},onFocusPrevious:function(){e.changeFocus(n-1)},onInput:function(t){e.confirmPinArray[n]=t,t&&e.changeFocus(n+1)},value:e.confirmPinArray[n]?e.confirmPinArray[n]:"",autofocus:0==n},null,8,["onSetRef","onFocusPrevious","onInput","value","autofocus"])})),64))]),(0,a._)("div",{class:(0,r.C_)(["text-center text-xs mt-1 text-red-500",[e.invalidPinMessage.length?"opacity-100":"opacity-0"]])}," â€‹"+(0,r.zw)(e.invalidPinMessage),3)])]})),stepInfo:(0,a.w5)((function(){return[(0,a._)("div",je,[(0,a._)("div",qe,(0,r.zw)(e.$t("confirmPIN")),1),(0,a._)("div",Qe,(0,r.zw)(e.$t("pinDescription")),1)])]})),actions:(0,a.w5)((function(){return[(0,a._)("div",Oe,[(0,a._)("button",{class:"text-xs p-2 pr-3 flex space-x-2 items-center btn btn-primary-outline focus:ring-2 focus:ring-offset-white focus:ring-offset-2",onClick:t[0]||(t[0]=function(t){return e.$emit("changeStep",2)}),disabled:e.isTransactionBuilding},[(0,a.Wm)(c,{icon:"angle-left",class:"w-3 h-3"}),(0,a._)("span",Ue,(0,r.zw)(e.$t("goBack")),1)],8,Xe),(0,a.Wm)(u,{class:"text-xs p-2 pl-3 btn btn-primary focus:ring-2 focus:ring-offset-white focus:ring-offset-2",onClick:e.nextStep,disabled:e.isTransactionBuilding||4!==e.confirmPinArray.join("").length,isLoading:e.isTransactionBuilding},{default:(0,a.w5)((function(){return[(0,a._)("div",Ge,[(0,a._)("span",null,(0,r.zw)(e.$t("continue")),1),(0,a.Wm)(c,{icon:"angle-right",class:"w-3 h-3"})])]})),_:1},8,["onClick","disabled","isLoading"])])]})),_:1},8,["totalSteps"])}var Je=n(7318),et=n(7043),tt=n(79524),nt=(0,a.aZ)({components:{AppButtonVue:Je.Z,VotingStep:Y,SingleDigitInputField:be},emits:["changeStep"],props:{totalSteps:{type:Number}},setup:function(e,t){var n=t.emit,r=(0,et.QT)(),i=r.t,s=(0,te.X)(),o=Me(),l=(0,a.Fl)((function(){return s.activeAccount})),c=(0,a.Fl)((function(){return o.votingKeyPin})),u=(0,g.iH)([]),p=(0,g.iH)(""),d=(0,g.iH)(!1),f=(0,g.iH)([]);(0,a.bv)((function(){f.value[0].focus()}));var m=function(e){if(!(e===f.value.length||e<0)){var t=f.value[e];t.focus()}};function v(){return x.apply(this,arguments)}function x(){return x=(0,ye.Z)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u.value.join("")===c.value.join("")){e.next=4;break}p.value=i("pinMismatch"),e.next=13;break;case 4:if(d.value=!0,o.computeVotingMetadata(),t={type:"GenericTransaction",auxiliaryData:{metadata:o.metadataList}},a=(0,tt.Lv)(l.value,t),"ERROR"!==a.status){e.next=10;break}throw new Error("something went wrong");case 10:o.$patch({votingTx:a.unsignedTx}),d.value=!1,n("changeStep",4);case 13:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}return(0,a.YP)((function(){return p.value}),(function(e){e.length&&setTimeout((function(){p.value=""}),5e3)})),{confirmPinArray:u,inputRefs:f,invalidPinMessage:p,isTransactionBuilding:d,nextStep:v,changeFocus:m}}});const at=(0,U.Z)(nt,[["render",Ye]]);var rt=at,it={class:"space-y-3"},st={class:"font-medium labelColor3"},ot={class:"labelColor2 text-sm"},lt={class:"flex flex-col max-w-full w-full"},ct={class:"text-xs labelColor2"},ut={class:"mt-1 p-2 card2 break-all tracking-wide text-sm labelColor3 font-mono"},pt={class:"mt-3 flex space-x-4"},dt={class:"w-1/2"},ft={class:"text-xs labelColor2"},mt={class:"mt-1 p-2 card2 break-all tracking-wide flex text-sm font-mono items-center labelColor3"},gt={class:"w-1/2"},vt={class:"text-xs labelColor2"},xt={class:"mt-1 p-2 card2 break-all tracking-wide text-sm font-mono flex items-center labelColor3"},wt={class:"mt-3 flex flex-col w-full max-w-full"},ht={class:"text-xs labelColor2"},bt={class:"mt-1"},yt={class:"flex space-x-2 w-full"},_t={class:"p-2 w-1/4 card2 flex items-center"},kt={class:"labelColor2 text-xs"},St={class:"truncate font-mono text-left break-all text-xs labelColor3"},Ct={key:0,class:"w-full"},At={class:"space-y-5 mt-2"},$t={key:0,class:"mt-3"},zt={class:"p-2 card2 flex justify-between items-center w-full"},Dt={class:"flex-grow text-xs labelColor3"},Rt={class:"card2 p-2 mt-1"},Vt={class:"flex space-x-5"},Tt=["disabled"],Ft={class:"capitalize"};function Zt(e,t,n,i,s,o){var l=(0,a.up)("ada"),c=(0,a.up)("ChevronRightIcon"),u=(0,a.up)("DisclosureButton"),p=(0,a.up)("prism-editor"),d=(0,a.up)("DisclosurePanel"),f=(0,a.up)("Disclosure"),m=(0,a.up)("font-awesome-icon"),g=(0,a.up)("TransactionDetailsVue"),v=(0,a.up)("AppExpandVue"),x=(0,a.up)("AppButtonVue"),w=(0,a.up)("voting-step-vue");return(0,a.wg)(),(0,a.j4)(w,{activeStep:4,totalSteps:5},{stepInfo:(0,a.w5)((function(){return[(0,a._)("div",it,[(0,a._)("div",st,(0,r.zw)(e.$t("confirmTransaction")),1),(0,a._)("div",ot,(0,r.zw)(e.$t("minAdaForVotingMessage1")),1)])]})),body:(0,a.w5)((function(){var n,i;return[(0,a._)("div",lt,[(0,a._)("div",null,[(0,a._)("div",ct,(0,r.zw)(e.$t("rewardAddress")),1),(0,a._)("div",ut,(0,r.zw)(e.rewardAddress),1)]),(0,a._)("div",pt,[(0,a._)("div",dt,[(0,a._)("div",ft,(0,r.zw)(e.$t("trxAmount")),1),(0,a._)("div",mt,[(0,a.Uk)((0,r.zw)(e.$filters.formatADA("0"))+" ",1),(0,a.Wm)(l,{class:"h-3 w-3 ml-2"})])]),(0,a._)("div",gt,[(0,a._)("div",vt,(0,r.zw)(e.$t("fees")),1),(0,a._)("div",xt,[(0,a.Uk)((0,r.zw)(e.$filters.formatADA(null!==(n=null===(i=e.transaction)||void 0===i?void 0:i.getFee().toString())&&void 0!==n?n:"0"))+" ",1),(0,a.Wm)(l,{class:"h-3 w-3 ml-2"})])])]),(0,a._)("div",wt,[(0,a._)("div",ht,(0,r.zw)(e.$t("metadata")),1),(0,a._)("div",bt,[(0,a.Wm)(f,{as:"template"},{default:(0,a.w5)((function(n){var i,s=n.open;return[(0,a._)("div",yt,[(0,a._)("div",_t,[(0,a._)("span",kt,(0,r.zw)(null===(i=e.votingMetadata)||void 0===i?void 0:i.label),1)]),(0,a.Wm)(u,{class:"w-3/4 p-2 card2 flex w-full items-center justify-between focus:outline-none"},{default:(0,a.w5)((function(){var t;return[(0,a._)("span",St,(0,r.zw)(null===(t=e.votingMetadata)||void 0===t?void 0:t.data),1),(0,a.Wm)(c,{class:(0,r.C_)(["w-3 h-3 mr-0",{"transform rotate-90":s}])},null,8,["class"])]})),_:2},1024)]),e.votingMetadata?((0,a.wg)(),(0,a.iD)("div",Ct,[(0,a.Wm)(ge.uT,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform h-0 opacity-50","enter-to-class":"transform h-full opacity-100","leave-active-class":"transition duration-75 ease-out","leave-from-class":"transform h-full opacity-100","leave-to-class":"transform h-0 opacity-0"},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,null,{default:(0,a.w5)((function(){return[(0,a._)("div",At,[(0,a.Wm)(p,{readonly:"",ignoreTabKey:"",class:"p-2 bg-gray-100 text-sm leading-5 font-mono",modelValue:e.votingMetadata.data,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.votingMetadata.data=t}),"line-numbers":"",lines:"3",language:"json",highlight:e.highlighter},null,8,["modelValue","highlight"])])]})),_:1})]})),_:1})])):(0,a.kq)("",!0)]})),_:1})])]),e.transaction?((0,a.wg)(),(0,a.iD)("div",$t,[(0,a.Wm)(v,null,{primary:(0,a.w5)((function(t){var n=t.open;return[(0,a._)("div",zt,[(0,a._)("span",Dt,(0,r.zw)(e.$t("moreDetails")),1),(0,a.Wm)(m,{icon:"chevron-right",class:(0,r.C_)(["w-4 h-4 labelColor3",{"transform rotate-90":n}])},null,8,["class"])])]})),secondary:(0,a.w5)((function(){return[(0,a._)("div",Rt,[(0,a.Wm)(g,{transaction:e.transaction},null,8,["transaction"])])]})),_:1})])):(0,a.kq)("",!0)])]})),actions:(0,a.w5)((function(){return[(0,a._)("div",Vt,[(0,a._)("button",{class:"text-xs p-2 pl-3 flex space-x-2 items-center btn btn-primary-outline focus:ring-2 focus:ring-offset-white focus:ring-offset-2",onClick:t[1]||(t[1]=function(t){return e.$emit("changeStep",3)}),disabled:e.isTransactionSubmitting},[(0,a.Wm)(m,{icon:"angle-left",class:"w-3 h-3"}),(0,a._)("span",Ft,(0,r.zw)(e.$t("goBack")),1)],8,Tt),(0,a.Wm)(x,{class:"text-xs py-2 px-4 flex space-x-2 items-center btn btn-primary focus:ring-2 focus:ring-offset-white focus:ring-offset-2 capitalize",onClick:e.confirm,disabled:e.isTxBuilding||e.isTransactionSubmitting,isLoading:e.isTransactionSubmitting},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,r.zw)(e.$t("confirm")),1)]})),_:1},8,["onClick","disabled","isLoading"])])]})),_:1})}var Wt=n(95082),It=n(56664),Pt=n(66347),Bt=(n(38862),n(54037)),Mt=n(51068),Ht=n(60064),Et=n(23611),Nt=n(91461),Kt=n(2393),Lt=n(28325),jt=(n(35433),n(74277),n(63616)),qt=n(7650),Qt=n(30656),Ot=n(394),Xt=(0,a.aZ)({components:{AppButtonVue:Je.Z,VotingStepVue:Y,AppExpandVue:Mt.Z,TransactionDetailsVue:Bt.Z,Disclosure:Et.pJ,DisclosurePanel:Et.V2,DisclosureButton:Et.lG,ChevronRightIcon:Nt.Z,PrismEditor:Kt.h},props:{totalSteps:{type:Number}},emits:["changeStep"],setup:function(e,t){var n=t.emit,r=(0,g.iH)(!1),i=Me(),s=(0,te.X)(),o=(0,Ot.H)(),l=(0,g.iH)(!0),c=(0,a.Fl)((function(){return s.activeAccount})),u=(0,g.iH)(),p=(0,a.Fl)((function(){return i.metadataList})),d=(0,a.Fl)((function(){return c.value.receiveAddress})),f=(0,a.Fl)((function(){var e,t=p.value[0],n={},a=(0,Pt.Z)(t.data);try{for(a.s();!(e=a.n()).done;){var r=(0,It.Z)(e.value,2),i=r[0],s=r[1];return n[i]="number"===typeof s?s:s.toString("hex"),(0,Wt.Z)((0,Wt.Z)({},t),{},{data:JSON.stringify(n,null,"\t")})}}catch(o){a.e(o)}finally{a.f()}}));function m(){return v.apply(this,arguments)}function v(){return v=(0,ye.Z)(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.computeVotingMetadata();case 2:if(t=e.sent,n={type:"GenericTransaction",auxiliaryData:{metadata:t}},a=(0,tt.Lv)(c.value,n),"OK"!==a.status){e.next=10;break}u.value=a.unsignedTx,l.value=!1,e.next=11;break;case 10:throw"Voting transaction build failed";case 11:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function x(e){return w.apply(this,arguments)}function w(){return w=(0,ye.Z)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r.value=!0,e.next=4,o.signAndSubmitTx(u.value,!0,t);case 4:a=!0,e.next=11;break;case 7:return e.prev=7,e.t0=e["catch"](0),n("changeStep",1),e.abrupt("return",Ht.k.error(e.t0));case 11:return e.prev=11,r.value=!1,e.finish(11);case 14:n("changeStep",a?5:1);case 15:case"end":return e.stop()}}),e,null,[[0,7,11,14]])}))),w.apply(this,arguments)}function h(){return b.apply(this,arguments)}function b(){return b=(0,ye.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:jt.Z.value.IS_EXTENSION&&"MNEMONIC"===c.value.walletType?qt.qH.openDialog({component:Qt.Z,size:qt.v7.maxContent,props:{onConfirmPassword:function(e){qt.qH.closeDialog(),x(e)}}}):x(void 0);case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}m();var y=function(e){return(0,Lt.highlight)(e,Lt.languages.json)};return{confirm:h,transaction:u,isTransactionSubmitting:r,rewardAddress:d,metadataList:p,votingMetadata:f,highlighter:y,isTxBuilding:l}}});const Ut=(0,U.Z)(Xt,[["render",Zt]]);var Gt=Ut,Yt={class:"mb-2 px-3 py-2 text-xs flex items-center gap-3 rounded-md border border-red-300 text-sm text-red-400 bg-red-100"},Jt={class:"flex flex-col md:flex-row p-2 md:space-x-20 xl:space-x-40"},en={class:"flex flex-col md:flex-none space-y-3 mb-5 md:mb-0 md:w-1/4 md:mr-5"},tn={key:0,class:"space-y-2"},nn={class:"flex items-center space-x-2"},an={class:"font-medium labelColor3"},rn=(0,a._)("svg",{class:"animate-spin w-4 mx-auto py-px text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[(0,a._)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,a._)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),sn={class:"labelColor2 text-sm"},on=(0,a._)("br",null,null,-1),ln={class:"font-medium labelColor3"},cn={class:"labelColor2 text-sm"},un={class:"flex flex-col space-y-5 max-w-full"},pn={key:0,class:"space-y-4"},dn={class:"mx-auto max-w-max border dark:border-dark-3 p-4 rounded-lg shadow-sm",ref:"qrcodeRef"},fn={class:"flex gap-2 mx-auto max-w-max"},mn={class:"flex text-xs items-center"},gn={key:1,class:"space-y-10"},vn={class:"font-medium labelColor3"},xn={class:"labelColor2 text-sm"};function wn(e,t,n,i,s,o){var l,c=(0,a.up)("font-awesome-icon"),u=(0,a.up)("qrcode-vue"),p=(0,a.up)("AppButton");return null!==(l=e.encryptedVotingKey)&&void 0!==l&&l.length?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("div",Yt,[(0,a.Wm)(c,{icon:"info-circle",class:"w-4 h-4"}),(0,a._)("span",null,(0,r.zw)(e.$t("downloadQR")),1)]),(0,a._)("div",Jt,[(0,a._)("div",en,[e.votingTransaction?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a._)("div",ln,(0,r.zw)(e.$t("registrationSuccess")),1),(0,a._)("div",cn,(0,r.zw)(e.$t("useQRCode")),1)],64)):((0,a.wg)(),(0,a.iD)("div",tn,[(0,a._)("div",nn,[(0,a._)("div",an,(0,r.zw)(e.$t("pendingRegistration")),1),rn]),(0,a._)("div",sn,[(0,a.Uk)((0,r.zw)(e.$t("votingTrxSubmitted")),1),on,(0,a.Uk)((0,r.zw)(e.$t("waitForPendingTrx")),1)])]))]),(0,a._)("div",un,[e.encryptedVotingKey.length?((0,a.wg)(),(0,a.iD)("div",pn,[(0,a._)("div",dn,[(0,a.Wm)(u,{class:"border dark:border-white",size:210,value:e.encryptedVotingKey},null,8,["value"])],512)])):(0,a.kq)("",!0),(0,a._)("div",fn,[(0,a._)("button",{class:"flex space-x-2 btn btn-primary-outline text-xs items-center px-2",onClick:t[0]||(t[0]=function(t){return e.$emit("changeStep",1)})},[(0,a.Wm)(c,{icon:"arrow-left",class:"w-4 h-4"}),(0,a._)("span",null,(0,r.zw)(e.$t("backToRegistration")),1)]),(0,a.Wm)(p,{class:"btn btn-primary px-2.5 py-2",onClick:e.downloadQrCode,isLoading:e.isQrDownloading},{default:(0,a.w5)((function(){return[(0,a._)("div",mn,[(0,a._)("span",null,(0,r.zw)(e.$t("download")),1)])]})),_:1},8,["onClick","isLoading"])])])])],64)):((0,a.wg)(),(0,a.iD)("div",gn,[(0,a._)("div",null,[(0,a._)("div",vn,(0,r.zw)(e.$t("alreadyRegistered")),1),(0,a._)("div",xn,(0,r.zw)(e.$t("QRCodeLost")),1)]),(0,a._)("button",{class:"btn btn-md btn-primary",onClick:t[1]||(t[1]=function(){return e.$emit("changeStep",1)})},[(0,a._)("span",null,(0,r.zw)(e.$t("register")),1)])]))}n(15306);var hn=n(61120),bn=n.n(hn),yn=(0,a.aZ)({components:{QrcodeVue:ee(),AppButton:Je.Z},props:{totalSteps:{type:Number}},data:function(){return{isQrDownloading:!1}},emits:["changeStep"],setup:function(){var e=Me(),t=(0,te.X)(),n=(0,a.Fl)((function(){return e.encryptedPrivateKey})),r=(0,a.Fl)((function(){return t.activeAccount})),i=(0,a.Fl)((function(){return r.value.operations.some((function(e){return e.types.includes("VOTING_REGISTRATION")}))}));return{votingTransaction:i,encryptedVotingKey:n}},methods:{downloadQrCode:function(){var e=this;return(0,ye.Z)(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isQrDownloading=!0,n=e.$refs.qrcodeRef,t.prev=2,t.next=5,bn()(n);case 5:a=t.sent,r=document.createElement("a"),r.setAttribute("download","catalyst-voting-qrcode.png"),r.setAttribute("href",a.toDataURL("image/png").replace("image/png","image/octet-stream")),r.click(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),Ht.k.error(t.t0);case 15:e.isQrDownloading=!1;case 16:case"end":return t.stop()}}),t,null,[[2,12]])})))()}}});const _n=(0,U.Z)(yn,[["render",wn]]);var kn=_n,Sn=n(55317),Cn=[re,Ne,rt,Gt,kn],An=(0,a.aZ)({setup:function(){var e=(0,te.X)(),t=(0,g.iH)(5),n=(0,g.iH)(new(x())("500000000")),r=(0,a.Fl)((function(){return e.activeAccount})),i=(0,a.Fl)((function(){return[].concat((0,m.Z)(r.value.pendingOperations),(0,m.Z)(r.value.operations)).some((function(e){return e.types.includes("VOTING_REGISTRATION")}))})),s=i.value?(0,g.XI)(kn):(0,g.XI)(re);function o(e){s.value=Cn[e-1]}(0,a.YP)(i,(function(e,t){!t&&e&&(s.value=Cn[4])}));var l=(0,a.Fl)((function(){var e=n.value,t=r.value.balance;return t.gte(e)})),c=(0,a.Fl)((function(){return!(r.value.poolInfo&&r.value.poolInfo.poolId)}));return{showDelegateAdaMessage:c,totalSteps:t,activeComponent:s,changeComponent:o,isEnoughAdaForVoting:l,activeAccount:r,minAdaForVoting:n,mdiBullhorn:Sn.uXM}}});const $n=(0,U.Z)(An,[["render",f]]);var zn=$n}}]);
<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Voter Voting Power Snapshot and Vote Storage Table - Catalyst Voting System - Core Technology</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href=".././book/assets/css/mdbook-admonish.css">
        <link rel="stylesheet" href=".././book/assets/css/open-in.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../00_prologue.html">Prologue</a></li><li class="chapter-item "><a href="../01_intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item "><a href="../02_core_ledger/index.html"><strong aria-hidden="true">2.</strong> Core Ledger</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../02_core_ledger/01_concepts/index.html"><strong aria-hidden="true">2.1.</strong> General Concepts</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../02_core_ledger/01_concepts/blockchain.html"><strong aria-hidden="true">2.1.1.</strong> Blockchain concepts</a></li><li class="chapter-item "><a href="../02_core_ledger/01_concepts/network.html"><strong aria-hidden="true">2.1.2.</strong> Network overview</a></li><li class="chapter-item "><a href="../02_core_ledger/01_concepts/node.html"><strong aria-hidden="true">2.1.3.</strong> Node organization</a></li><li class="chapter-item "><a href="../02_core_ledger/01_concepts/stake.html"><strong aria-hidden="true">2.1.4.</strong> Stake</a></li></ol></li><li class="chapter-item "><a href="../02_core_ledger/02_quickstart/index.html"><strong aria-hidden="true">2.2.</strong> Quickstart</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../02_core_ledger/02_quickstart/01_command_line.html"><strong aria-hidden="true">2.2.1.</strong> Command line tools</a></li><li class="chapter-item "><a href="../02_core_ledger/02_quickstart/02_passive_node.html"><strong aria-hidden="true">2.2.2.</strong> Starting a passive node</a></li><li class="chapter-item "><a href="../02_core_ledger/02_quickstart/03_rest_api.html"><strong aria-hidden="true">2.2.3.</strong> REST Api</a></li><li class="chapter-item "><a href="../02_core_ledger/02_quickstart/04_explorer.html"><strong aria-hidden="true">2.2.4.</strong> Explorer mode</a></li><li class="chapter-item "><a href="../02_core_ledger/02_quickstart/05_leader_candidate.html"><strong aria-hidden="true">2.2.5.</strong> How to start a node as a leader candidate</a></li></ol></li><li class="chapter-item "><a href="../02_core_ledger/03_configuration/index.html"><strong aria-hidden="true">2.3.</strong> Configuration</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../02_core_ledger/03_configuration/leadership.html"><strong aria-hidden="true">2.3.1.</strong> Leadership</a></li><li class="chapter-item "><a href="../02_core_ledger/03_configuration/logging.html"><strong aria-hidden="true">2.3.2.</strong> Logging</a></li><li class="chapter-item "><a href="../02_core_ledger/03_configuration/mempool.html"><strong aria-hidden="true">2.3.3.</strong> Mempool</a></li><li class="chapter-item "><a href="../02_core_ledger/03_configuration/network.html"><strong aria-hidden="true">2.3.4.</strong> Node network</a></li><li class="chapter-item "><a href="../02_core_ledger/03_configuration/prometheus.html"><strong aria-hidden="true">2.3.5.</strong> Prometheus</a></li></ol></li><li class="chapter-item "><a href="../02_core_ledger/04_jcli/index.html"><strong aria-hidden="true">2.4.</strong> jcli</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../02_core_ledger/04_jcli/address.html"><strong aria-hidden="true">2.4.1.</strong> Address</a></li><li class="chapter-item "><a href="../02_core_ledger/04_jcli/certificate.html"><strong aria-hidden="true">2.4.2.</strong> Certificate</a></li><li class="chapter-item "><a href="../02_core_ledger/04_jcli/genesis.html"><strong aria-hidden="true">2.4.3.</strong> Genesis</a></li><li class="chapter-item "><a href="../02_core_ledger/04_jcli/key.html"><strong aria-hidden="true">2.4.4.</strong> cryptographic keys</a></li><li class="chapter-item "><a href="../02_core_ledger/04_jcli/rest.html"><strong aria-hidden="true">2.4.5.</strong> REST</a></li><li class="chapter-item "><a href="../02_core_ledger/04_jcli/transaction.html"><strong aria-hidden="true">2.4.6.</strong> Transaction</a></li><li class="chapter-item "><a href="../02_core_ledger/04_jcli/vote.html"><strong aria-hidden="true">2.4.7.</strong> Voting</a></li></ol></li><li class="chapter-item "><a href="../02_core_ledger/05_stake_pool/index.html"><strong aria-hidden="true">2.5.</strong> Staking with J√∂rmungandr</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../02_core_ledger/05_stake_pool/delegating_stake.html"><strong aria-hidden="true">2.5.1.</strong> Delegating your stake</a></li><li class="chapter-item "><a href="../02_core_ledger/05_stake_pool/registering_stake_pool.html"><strong aria-hidden="true">2.5.2.</strong> Registering a stake pool</a></li><li class="chapter-item "><a href="../02_core_ledger/05_stake_pool/retiring_stake_pool.html"><strong aria-hidden="true">2.5.3.</strong> Retiring a stake pool</a></li></ol></li><li class="chapter-item "><a href="../02_core_ledger/06_advanced/index.html"><strong aria-hidden="true">2.6.</strong> Advanced</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../02_core_ledger/06_advanced/01_the_genesis_block.html"><strong aria-hidden="true">2.6.1.</strong> genesis file</a></li><li class="chapter-item "><a href="../02_core_ledger/06_advanced/02_starting_bft_blockchain.html"><strong aria-hidden="true">2.6.2.</strong> starting a bft node</a></li><li class="chapter-item "><a href="../02_core_ledger/06_advanced/03_starting_genesis_praos_blockchain.html"><strong aria-hidden="true">2.6.3.</strong> starting a genesis blockchain</a></li><li class="chapter-item "><a href="../02_core_ledger/06_advanced/04_vote_fragments_voteplan_blockchain_relationships.html"><strong aria-hidden="true">2.6.4.</strong> How Vote plans, Vote Fragments and the blockchain transaction work and inter-relate</a></li></ol></li><li class="chapter-item "><a href="../02_core_ledger/07_specs/index.html"><strong aria-hidden="true">2.7.</strong> Jormungandr Specifications</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../02_core_ledger/07_specs/migration.html"><strong aria-hidden="true">2.7.1.</strong> MIGRATION</a></li><li class="chapter-item "><a href="../02_core_ledger/07_specs/network.html"><strong aria-hidden="true">2.7.2.</strong> Network</a></li></ol></li><li class="chapter-item "><a href="../02_core_ledger/08_testing/index.html"><strong aria-hidden="true">2.8.</strong> testing</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../02_core_ledger/08_testing/automation.html"><strong aria-hidden="true">2.8.1.</strong> jormungandr-automation</a></li><li class="chapter-item "><a href="../02_core_ledger/08_testing/hersir.html"><strong aria-hidden="true">2.8.2.</strong> Hersir</a></li><li class="chapter-item "><a href="../02_core_ledger/08_testing/integration_tests.html"><strong aria-hidden="true">2.8.3.</strong> jormungandr-integration-tests</a></li><li class="chapter-item "><a href="../02_core_ledger/08_testing/loki.html"><strong aria-hidden="true">2.8.4.</strong> Loki</a></li><li class="chapter-item "><a href="../02_core_ledger/08_testing/mjolnir.html"><strong aria-hidden="true">2.8.5.</strong> Mjolnir</a></li><li class="chapter-item "><a href="../02_core_ledger/08_testing/thor.html"><strong aria-hidden="true">2.8.6.</strong> Thor</a></li></ol></li><li class="chapter-item "><a href="../02_core_ledger/09_internal_design/index.html"><strong aria-hidden="true">2.9.</strong> Internal Design</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../02_core_ledger/09_internal_design/01_auto-start.html"><strong aria-hidden="true">2.9.1.</strong> Automatic deployment of the voting blockchain</a></li><li class="chapter-item "><a href="../02_core_ledger/09_internal_design/02_permissionless_auth.html"><strong aria-hidden="true">2.9.2.</strong> Permissionless Auth</a></li></ol></li></ol></li><li class="chapter-item "><a href="../03_core_testing/index.html"><strong aria-hidden="true">3.</strong> Catalyst testing User Guide</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../03_core_testing/iapyx/index.html"><strong aria-hidden="true">3.1.</strong> Iapyx</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../03_core_testing/iapyx/iapyx.html"><strong aria-hidden="true">3.1.1.</strong> Iapyx</a></li><li class="chapter-item "><a href="../03_core_testing/iapyx/load.html"><strong aria-hidden="true">3.1.2.</strong> Iapyx Load</a></li></ol></li><li class="chapter-item "><a href="../03_core_testing/integration-tests/index.html"><strong aria-hidden="true">3.2.</strong> integration-tests</a></li><li class="chapter-item "><a href="../03_core_testing/registration-service/index.html"><strong aria-hidden="true">3.3.</strong> Registration service</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../03_core_testing/registration-service/cli.html"><strong aria-hidden="true">3.3.1.</strong> Registration CLI</a></li><li class="chapter-item "><a href="../03_core_testing/registration-service/configuration.html"><strong aria-hidden="true">3.3.2.</strong> Configuration</a></li></ol></li><li class="chapter-item "><a href="../03_core_testing/registration-verify-service/index.html"><strong aria-hidden="true">3.4.</strong> Registration service</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../03_core_testing/registration-verify-service/cli.html"><strong aria-hidden="true">3.4.1.</strong> Registration Verify CLI</a></li><li class="chapter-item "><a href="../03_core_testing/registration-verify-service/configuration.html"><strong aria-hidden="true">3.4.2.</strong> Configuration</a></li></ol></li><li class="chapter-item "><a href="../03_core_testing/snapshot-service/index.html"><strong aria-hidden="true">3.5.</strong> Snapshot trigger service</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../03_core_testing/snapshot-service/cli.html"><strong aria-hidden="true">3.5.1.</strong> Registration CLI</a></li><li class="chapter-item "><a href="../03_core_testing/snapshot-service/configuration.html"><strong aria-hidden="true">3.5.2.</strong> Configuration</a></li></ol></li><li class="chapter-item "><a href="../03_core_testing/snapshot-wormhole/index.html"><strong aria-hidden="true">3.6.</strong> snapshot wormhole</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../03_core_testing/snapshot-wormhole/configuration.html"><strong aria-hidden="true">3.6.1.</strong> Configuration</a></li></ol></li><li class="chapter-item "><a href="../03_core_testing/valgrind/index.html"><strong aria-hidden="true">3.7.</strong> valgrind</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../03_core_testing/valgrind/configuration.html"><strong aria-hidden="true">3.7.1.</strong> Configuration</a></li></ol></li><li class="chapter-item "><a href="../03_core_testing/vitup/index.html"><strong aria-hidden="true">3.8.</strong> vitup</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../03_core_testing/vitup/configuration.html"><strong aria-hidden="true">3.8.1.</strong> Configuration</a></li><li class="chapter-item "><a href="../03_core_testing/vitup/data_generation/index.html"><strong aria-hidden="true">3.8.2.</strong> Data Generation</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../03_core_testing/vitup/data_generation/reset.html"><strong aria-hidden="true">3.8.2.1.</strong> Configuration</a></li><li class="chapter-item "><a href="../03_core_testing/vitup/data_generation/snapshot.html"><strong aria-hidden="true">3.8.2.2.</strong> Configuration</a></li></ol></li><li class="chapter-item "><a href="../03_core_testing/vitup/data_generation.html"><strong aria-hidden="true">3.8.3.</strong> Data Generation</a></li><li class="chapter-item "><a href="../03_core_testing/vitup/mock.html"><strong aria-hidden="true">3.8.4.</strong> Mock</a></li><li class="chapter-item "><a href="../03_core_testing/vitup/mock_farm.html"><strong aria-hidden="true">3.8.5.</strong> Mock Farm</a></li><li class="chapter-item "><a href="../03_core_testing/vitup/run_modes.html"><strong aria-hidden="true">3.8.6.</strong> Configuration modes</a></li></ol></li></ol></li><li class="chapter-item "><a href="../04_core_vitss/index.html"><strong aria-hidden="true">4.</strong> Core VIT Servicing Station</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../04_core_vitss/testing.html"><strong aria-hidden="true">4.1.</strong> vit-servicing-station-tests</a></li></ol></li><li class="chapter-item "><a href="../05_unified_platform/index.html"><strong aria-hidden="true">5.</strong> Unified Platform</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../05_unified_platform/01_catalyst-cardano-bridge/index.html"><strong aria-hidden="true">5.1.</strong> Overview</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../05_unified_platform/01_catalyst-cardano-bridge/01_cardano_nodes.html"><strong aria-hidden="true">5.1.1.</strong> Cardano Nodes</a></li><li class="chapter-item "><a href="../05_unified_platform/01_catalyst-cardano-bridge/02_bridge_pipeline/index.html"><strong aria-hidden="true">5.1.2.</strong> Bridge Pipeline</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../05_unified_platform/01_catalyst-cardano-bridge/02_bridge_pipeline/01_block_reader.html"><strong aria-hidden="true">5.1.2.1.</strong> Block Reader</a></li></ol></li><li class="chapter-item "><a href="../05_unified_platform/01_catalyst-cardano-bridge/03_rest_http_service.html"><strong aria-hidden="true">5.1.3.</strong> REST HTTP Service</a></li><li class="chapter-item "><a href="../05_unified_platform/01_catalyst-cardano-bridge/04_event_stream.html"><strong aria-hidden="true">5.1.4.</strong> Event Stream</a></li><li class="chapter-item "><a href="../05_unified_platform/01_catalyst-cardano-bridge/05_database/index.html"><strong aria-hidden="true">5.1.5.</strong> Database</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../05_unified_platform/01_catalyst-cardano-bridge/05_database/01_registration_db.html"><strong aria-hidden="true">5.1.5.1.</strong> Registrations Database</a></li><li class="chapter-item "><a href="../05_unified_platform/01_catalyst-cardano-bridge/05_database/02_staked_ada_db.html"><strong aria-hidden="true">5.1.5.2.</strong> Staked ADA Database</a></li><li class="chapter-item "><a href="../05_unified_platform/01_catalyst-cardano-bridge/05_database/03_transaction_state.html"><strong aria-hidden="true">5.1.5.3.</strong> Transaction State Database</a></li></ol></li></ol></li></ol></li><li class="chapter-item "><a href="../06_rust_api/index.html"><strong aria-hidden="true">6.</strong> Rust API</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../06_rust_api/rust_style_guide.html"><strong aria-hidden="true">6.1.</strong> ü¶Ä Rust Style Guide</a></li></ol></li><li class="chapter-item "><a href="../07_web_api/index.html"><strong aria-hidden="true">7.</strong> Web API</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../07_web_api/catalyst-core-api.html"><strong aria-hidden="true">7.1.</strong> Catalyst Core API V1</a></li><li class="chapter-item "><a href="../07_web_api/dbsync-explorer.html"><strong aria-hidden="true">7.2.</strong> dbSync Explorer HTTP/REST API V1</a></li><li class="chapter-item "><a href="../07_web_api/vit-servicing-station-v0.html"><strong aria-hidden="true">7.3.</strong> VIT Servicing Station HTTP/REST API V0</a></li><li class="chapter-item "><a href="../07_web_api/vit-testing-mock-farm-v0.html"><strong aria-hidden="true">7.4.</strong> VIT Testing Mock Farm HTTP/REST API V0</a></li><li class="chapter-item "><a href="../07_web_api/vit-testing-mock-v0.html"><strong aria-hidden="true">7.5.</strong> VIT Testing Mock HTTP/REST API V0</a></li><li class="chapter-item "><a href="../07_web_api/vote-ledger-v0.html"><strong aria-hidden="true">7.6.</strong> Vote Ledger HTTP/REST API V0</a></li><li class="chapter-item "><a href="../07_web_api/vote-ledger-v1.html"><strong aria-hidden="true">7.7.</strong> Vote Ledger HTTP/REST API V1</a></li></ol></li><li class="chapter-item expanded "><a href="../08_event-db/index.html"><strong aria-hidden="true">8.</strong> Event DB crate</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../08_event-db/01_development.html"><strong aria-hidden="true">8.1.</strong> Event DB Local Development</a></li><li class="chapter-item "><a href="../08_event-db/02_config-tables.html"><strong aria-hidden="true">8.2.</strong> General Configuration</a></li><li class="chapter-item "><a href="../08_event-db/03_event-table.html"><strong aria-hidden="true">8.3.</strong> Event Definition Table</a></li><li class="chapter-item "><a href="../08_event-db/04_objective_tables.html"><strong aria-hidden="true">8.4.</strong> Objective and Proposal  Tables</a></li><li class="chapter-item "><a href="../08_event-db/05_vote_plans.html"><strong aria-hidden="true">8.5.</strong> Vote Plan Tables</a></li><li class="chapter-item expanded "><a href="../08_event-db/06_snapshot_tables.html" class="active"><strong aria-hidden="true">8.6.</strong> Voter Voting Power Snapshot and Vote Storage Table</a></li><li class="chapter-item "><a href="../08_event-db/07_automation_support.html"><strong aria-hidden="true">8.7.</strong> Catalyst Automation Support Tables</a></li><li class="chapter-item "><a href="../08_event-db/08_vitss.html"><strong aria-hidden="true">8.8.</strong> VitSS Compatibility</a></li></ol></li><li class="chapter-item "><a href="../97_CONTRIBUTING.html"><strong aria-hidden="true">9.</strong> Contributing to Catalyst Core</a></li><li class="chapter-item "><a href="../98_CODE_OF_CONDUCT.html"><strong aria-hidden="true">10.</strong> Contributor Covenant Code of Conduct</a></li><li class="chapter-item "><a href="../99_example_enhanced_markup.html"><strong aria-hidden="true">11.</strong> Example Enhanced Markup</a></li><li class="chapter-item affix "><a href="../ZZ_suffix.html">Suffix</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Catalyst Voting System - Core Technology</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/input-output-hk/catalyst-core" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="voter-voting-power-snapshot-and-vote-storage-table"><a class="header" href="#voter-voting-power-snapshot-and-vote-storage-table">Voter Voting Power Snapshot and Vote Storage Table</a></h1>
<p>This table stores:</p>
<ul>
<li>The details of each registration and voting power of each voter.</li>
<li>The results of the latest snapshots for each event.</li>
<li>The record of all votes cast by voters.</li>
</ul>
<h2 id="snapshot--vote-table-diagram"><a class="header" href="#snapshot--vote-table-diagram">Snapshot &amp; Vote Table Diagram</a></h2>
<pre><svg width="1958pt" height="1933pt"
 viewBox="0.00 0.00 1958.00 1933.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1929)">
<title>erd</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1929 1954,-1929 1954,4 -4,4"/>
<text text-anchor="middle" x="975" y="-1892.5" font-family="Times,serif" font-size="30.00" fill="blue">Catalyst Event Database &#45; Snapshot</text>
<!-- ballot -->
<g id="node1" class="node">
<title>ballot</title>
<polygon fill="#009879" stroke="none" points="0,-1643 0,-1673 484,-1673 484,-1643 0,-1643"/>
<polygon fill="none" stroke="black" points="0,-1643 0,-1673 484,-1673 484,-1643 0,-1643"/>
<text text-anchor="start" x="214.5" y="-1652" font-family="Courier bold italic" font-weight="bold" font-size="20.00" fill="white">ballot</text>
<polygon fill="none" stroke="black" points="0,-1616 0,-1643 95,-1643 95,-1616 0,-1616"/>
<text text-anchor="start" x="13" y="-1623.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Column</text>
<polygon fill="none" stroke="black" points="95,-1616 95,-1643 168,-1643 168,-1616 95,-1616"/>
<text text-anchor="start" x="111" y="-1623.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Type</text>
<polygon fill="none" stroke="black" points="168,-1616 168,-1643 484,-1643 484,-1616 168,-1616"/>
<text text-anchor="start" x="275.5" y="-1623.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Description</text>
<polygon fill="#54ff9f" stroke="none" points="0,-1591 0,-1616 95,-1616 95,-1591 0,-1591"/>
<polygon fill="none" stroke="black" points="0,-1591 0,-1616 95,-1616 95,-1591 0,-1591"/>
<text text-anchor="start" x="3" y="-1597.8" font-family="Times,serif" font-size="16.00">row_id</text>
<polygon fill="#54ff9f" stroke="none" points="95,-1591 95,-1616 168,-1616 168,-1591 95,-1591"/>
<polygon fill="none" stroke="black" points="95,-1591 95,-1616 168,-1616 168,-1591 95,-1591"/>
<text text-anchor="start" x="108.5" y="-1597.8" font-family="Times,serif" font-size="16.00">bigint+</text>
<polygon fill="#54ff9f" stroke="none" points="168,-1591 168,-1616 484,-1616 484,-1591 168,-1591"/>
<polygon fill="none" stroke="black" points="168,-1591 168,-1616 484,-1616 484,-1591 168,-1591"/>
<text text-anchor="start" x="171" y="-1599.6" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">none</text>
<polygon fill="none" stroke="black" points="0,-1557 0,-1591 95,-1591 95,-1557 0,-1557"/>
<text text-anchor="start" x="3" y="-1568.4" font-family="Times,serif" font-size="16.00">objective</text>
<polygon fill="none" stroke="black" points="95,-1557 95,-1591 168,-1591 168,-1557 95,-1557"/>
<text text-anchor="start" x="109.5" y="-1568.4" font-family="Times,serif" font-size="16.00">integer</text>
<polygon fill="none" stroke="black" points="168,-1557 168,-1591 484,-1591 484,-1557 168,-1557"/>
<text text-anchor="start" x="171" y="-1575.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">Reference to the Objective the ballot</text>
<text text-anchor="start" x="171" y="-1561.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">was for.</text>
<polygon fill="none" stroke="black" points="0,-1495 0,-1557 95,-1557 95,-1495 0,-1495"/>
<text text-anchor="start" x="3" y="-1520.4" font-family="Times,serif" font-size="16.00">proposal</text>
<polygon fill="none" stroke="black" points="95,-1495 95,-1557 168,-1557 168,-1495 95,-1495"/>
<text text-anchor="start" x="109.5" y="-1521.4" font-family="Times,serif" font-style="italic" font-size="16.00">integer</text>
<polygon fill="none" stroke="black" points="168,-1495 168,-1557 484,-1557 484,-1495 168,-1495"/>
<text text-anchor="start" x="171" y="-1541.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">Reference to the Proposal the ballot</text>
<text text-anchor="start" x="171" y="-1527.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">was for.</text>
<text text-anchor="start" x="171" y="-1513.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">May be NULL if this ballot covers ALL</text>
<text text-anchor="start" x="171" y="-1499.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">proposals in the challenge.</text>
<polygon fill="none" stroke="black" points="0,-1461 0,-1495 95,-1495 95,-1461 0,-1461"/>
<text text-anchor="start" x="3" y="-1472.4" font-family="Times,serif" font-size="16.00">voter</text>
<polygon fill="none" stroke="black" points="95,-1461 95,-1495 168,-1495 168,-1461 95,-1461"/>
<text text-anchor="start" x="109.5" y="-1472.4" font-family="Times,serif" font-size="16.00">integer</text>
<polygon fill="none" stroke="black" points="168,-1461 168,-1495 484,-1495 484,-1461 168,-1461"/>
<text text-anchor="start" x="171" y="-1479.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">Reference to the Voter who cast the</text>
<text text-anchor="start" x="171" y="-1465.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">ballot</text>
<polygon fill="none" stroke="black" points="0,-1436 0,-1461 95,-1461 95,-1436 0,-1436"/>
<text text-anchor="start" x="3" y="-1442.8" font-family="Times,serif" font-size="16.00">fragment_id</text>
<polygon fill="none" stroke="black" points="95,-1436 95,-1461 168,-1461 168,-1436 95,-1436"/>
<text text-anchor="start" x="119.5" y="-1442.8" font-family="Times,serif" font-size="16.00">text</text>
<polygon fill="none" stroke="black" points="168,-1436 168,-1461 484,-1461 484,-1436 168,-1436"/>
<text text-anchor="start" x="171" y="-1444.6" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">Unique ID of this Ballot</text>
<polygon fill="none" stroke="black" points="0,-1402 0,-1436 95,-1436 95,-1402 0,-1402"/>
<text text-anchor="start" x="3" y="-1413.4" font-family="Times,serif" font-size="16.00">cast_at</text>
<polygon fill="none" stroke="black" points="95,-1402 95,-1436 168,-1436 168,-1402 95,-1402"/>
<text text-anchor="start" x="98" y="-1413.4" font-family="Times,serif" font-size="16.00">timestamp</text>
<polygon fill="none" stroke="black" points="168,-1402 168,-1436 484,-1436 484,-1402 168,-1402"/>
<text text-anchor="start" x="171" y="-1420.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">When this ballot was recorded as</text>
<text text-anchor="start" x="171" y="-1406.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">properly cast</text>
<polygon fill="none" stroke="black" points="0,-1368 0,-1402 95,-1402 95,-1368 0,-1368"/>
<text text-anchor="start" x="3" y="-1379.4" font-family="Times,serif" font-size="16.00">choice</text>
<polygon fill="none" stroke="black" points="95,-1368 95,-1402 168,-1402 168,-1368 95,-1368"/>
<text text-anchor="start" x="105.5" y="-1380.4" font-family="Times,serif" font-style="italic" font-size="16.00">smallint</text>
<polygon fill="none" stroke="black" points="168,-1368 168,-1402 484,-1402 484,-1368 168,-1368"/>
<text text-anchor="start" x="171" y="-1386.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">If a public vote, the choice on the</text>
<text text-anchor="start" x="171" y="-1372.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">ballot, otherwise NULL.</text>
<polygon fill="none" stroke="black" points="0,-1343 0,-1368 95,-1368 95,-1343 0,-1343"/>
<text text-anchor="start" x="3" y="-1349.8" font-family="Times,serif" font-size="16.00">raw_fragment</text>
<polygon fill="none" stroke="black" points="95,-1343 95,-1368 168,-1368 168,-1343 95,-1343"/>
<text text-anchor="start" x="114.5" y="-1349.8" font-family="Times,serif" font-size="16.00">bytea</text>
<polygon fill="none" stroke="black" points="168,-1343 168,-1368 484,-1368 484,-1343 168,-1343"/>
<text text-anchor="start" x="171" y="-1351.6" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The raw ballot record.</text>
<polygon fill="#333333" stroke="none" points="0,-1321 0,-1343 484,-1343 484,-1321 0,-1321"/>
<polygon fill="none" stroke="black" points="0,-1321 0,-1343 484,-1343 484,-1321 0,-1321"/>
<text text-anchor="start" x="3" y="-1327.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="white">All Ballots cast on an event.</text>
</g>
<!-- voter -->
<g id="node5" class="node">
<title>voter</title>
<polygon fill="#009879" stroke="none" points="547.5,-1440 547.5,-1470 1026.5,-1470 1026.5,-1440 547.5,-1440"/>
<polygon fill="none" stroke="black" points="547.5,-1440 547.5,-1470 1026.5,-1470 1026.5,-1440 547.5,-1440"/>
<text text-anchor="start" x="761" y="-1449" font-family="Courier bold italic" font-weight="bold" font-size="20.00" fill="white">voter</text>
<polygon fill="none" stroke="black" points="547.5,-1413 547.5,-1440 641.5,-1440 641.5,-1413 547.5,-1413"/>
<text text-anchor="start" x="560" y="-1420.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Column</text>
<polygon fill="none" stroke="black" points="641.5,-1413 641.5,-1440 693.5,-1440 693.5,-1413 641.5,-1413"/>
<text text-anchor="start" x="647" y="-1420.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Type</text>
<polygon fill="none" stroke="black" points="693.5,-1413 693.5,-1440 1026.5,-1440 1026.5,-1413 693.5,-1413"/>
<text text-anchor="start" x="809.5" y="-1420.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Description</text>
<polygon fill="#54ff9f" stroke="none" points="547.5,-1388 547.5,-1413 641.5,-1413 641.5,-1388 547.5,-1388"/>
<polygon fill="none" stroke="black" points="547.5,-1388 547.5,-1413 641.5,-1413 641.5,-1388 547.5,-1388"/>
<text text-anchor="start" x="550.5" y="-1394.8" font-family="Times,serif" font-size="16.00">row_id</text>
<polygon fill="#54ff9f" stroke="none" points="641.5,-1388 641.5,-1413 693.5,-1413 693.5,-1388 641.5,-1388"/>
<polygon fill="none" stroke="black" points="641.5,-1388 641.5,-1413 693.5,-1413 693.5,-1388 641.5,-1388"/>
<text text-anchor="start" x="644.5" y="-1394.8" font-family="Times,serif" font-size="16.00">bigint+</text>
<polygon fill="#54ff9f" stroke="none" points="693.5,-1388 693.5,-1413 1026.5,-1413 1026.5,-1388 693.5,-1388"/>
<polygon fill="none" stroke="black" points="693.5,-1388 693.5,-1413 1026.5,-1413 1026.5,-1388 693.5,-1388"/>
<text text-anchor="start" x="696.5" y="-1396.6" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">none</text>
<polygon fill="none" stroke="black" points="547.5,-1363 547.5,-1388 641.5,-1388 641.5,-1363 547.5,-1363"/>
<text text-anchor="start" x="550.5" y="-1369.8" font-family="Times,serif" font-size="16.00">voting_key</text>
<polygon fill="none" stroke="black" points="641.5,-1363 641.5,-1388 693.5,-1388 693.5,-1363 641.5,-1363"/>
<text text-anchor="start" x="655.5" y="-1369.8" font-family="Times,serif" font-size="16.00">text</text>
<polygon fill="none" stroke="black" points="693.5,-1363 693.5,-1388 1026.5,-1388 1026.5,-1363 693.5,-1363"/>
<text text-anchor="start" x="696.5" y="-1371.6" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">Either the voting key.</text>
<polygon fill="none" stroke="black" points="547.5,-1329 547.5,-1363 641.5,-1363 641.5,-1329 547.5,-1329"/>
<text text-anchor="start" x="550.5" y="-1340.4" font-family="Times,serif" font-size="16.00">snapshot_id</text>
<polygon fill="none" stroke="black" points="641.5,-1329 641.5,-1363 693.5,-1363 693.5,-1329 641.5,-1329"/>
<text text-anchor="start" x="645.5" y="-1340.4" font-family="Times,serif" font-size="16.00">integer</text>
<polygon fill="none" stroke="black" points="693.5,-1329 693.5,-1363 1026.5,-1363 1026.5,-1329 693.5,-1329"/>
<text text-anchor="start" x="696.5" y="-1347.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The ID of the snapshot this record</text>
<text text-anchor="start" x="696.5" y="-1333.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">belongs to.</text>
<polygon fill="none" stroke="black" points="547.5,-1304 547.5,-1329 641.5,-1329 641.5,-1304 547.5,-1304"/>
<text text-anchor="start" x="550.5" y="-1310.8" font-family="Times,serif" font-size="16.00">voting_group</text>
<polygon fill="none" stroke="black" points="641.5,-1304 641.5,-1329 693.5,-1329 693.5,-1304 641.5,-1304"/>
<text text-anchor="start" x="655.5" y="-1310.8" font-family="Times,serif" font-size="16.00">text</text>
<polygon fill="none" stroke="black" points="693.5,-1304 693.5,-1329 1026.5,-1329 1026.5,-1304 693.5,-1304"/>
<text text-anchor="start" x="696.5" y="-1312.6" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The voter group the voter belongs to.</text>
<polygon fill="none" stroke="black" points="547.5,-1270 547.5,-1304 641.5,-1304 641.5,-1270 547.5,-1270"/>
<text text-anchor="start" x="550.5" y="-1281.4" font-family="Times,serif" font-size="16.00">voting_power</text>
<polygon fill="none" stroke="black" points="641.5,-1270 641.5,-1304 693.5,-1304 693.5,-1270 641.5,-1270"/>
<text text-anchor="start" x="649" y="-1281.4" font-family="Times,serif" font-size="16.00">bigint</text>
<polygon fill="none" stroke="black" points="693.5,-1270 693.5,-1304 1026.5,-1304 1026.5,-1270 693.5,-1270"/>
<text text-anchor="start" x="696.5" y="-1288.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">Calculated Voting Power associated with</text>
<text text-anchor="start" x="696.5" y="-1274.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">this key.</text>
<polygon fill="#333333" stroke="none" points="547.5,-1248 547.5,-1270 1026.5,-1270 1026.5,-1248 547.5,-1248"/>
<polygon fill="none" stroke="black" points="547.5,-1248 547.5,-1270 1026.5,-1270 1026.5,-1248 547.5,-1248"/>
<text text-anchor="start" x="550.5" y="-1254.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="white">Voting Power for every voting key.</text>
</g>
<!-- ballot&#45;&gt;voter -->
<g id="edge7" class="edge">
<title>ballot:voter_out&#45;&gt;voter:row_id</title>
<path fill="none" stroke="black" d="M484,-1478C523.82,-1478 506.3,-1414.76 535.37,-1402.9"/>
<polygon fill="black" stroke="black" points="535.77,-1406.21 545,-1401 534.54,-1399.32 535.77,-1406.21"/>
</g>
<!-- objective -->
<g id="node7" class="node">
<title>objective</title>
<polygon fill="#009879" stroke="none" points="738.5,-1696 738.5,-1726 835.5,-1726 835.5,-1696 738.5,-1696"/>
<polygon fill="none" stroke="black" points="738.5,-1696 738.5,-1726 835.5,-1726 835.5,-1696 738.5,-1696"/>
<text text-anchor="start" x="741.5" y="-1705" font-family="Courier bold italic" font-weight="bold" font-size="20.00" fill="white">objective</text>
<polygon fill="none" stroke="black" points="738.5,-1669 738.5,-1696 835.5,-1696 835.5,-1669 738.5,-1669"/>
<text text-anchor="start" x="752.5" y="-1676.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Column</text>
<polygon fill="none" stroke="black" points="738.5,-1644 738.5,-1669 835.5,-1669 835.5,-1644 738.5,-1644"/>
<text text-anchor="start" x="741.5" y="-1650.8" font-family="Times,serif" font-size="16.00">row_id</text>
<polygon fill="#333333" stroke="none" points="738.5,-1622 738.5,-1644 835.5,-1644 835.5,-1622 738.5,-1622"/>
<polygon fill="none" stroke="black" points="738.5,-1622 738.5,-1644 835.5,-1644 835.5,-1622 738.5,-1622"/>
<text text-anchor="start" x="741.5" y="-1628.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="white">ABRIDGED</text>
</g>
<!-- ballot&#45;&gt;objective -->
<g id="edge8" class="edge">
<title>ballot:objective_out&#45;&gt;objective:row_id</title>
<path fill="none" stroke="black" d="M484,-1574C506.32,-1574 500.33,-1598.45 520,-1609 603.65,-1653.87 635.85,-1655.91 726.01,-1656"/>
<polygon fill="black" stroke="black" points="726,-1659.5 736,-1656 726,-1652.5 726,-1659.5"/>
</g>
<!-- proposal -->
<g id="node8" class="node">
<title>proposal</title>
<polygon fill="#009879" stroke="none" points="742,-1566 742,-1596 832,-1596 832,-1566 742,-1566"/>
<polygon fill="none" stroke="black" points="742,-1566 742,-1596 832,-1596 832,-1566 742,-1566"/>
<text text-anchor="start" x="745" y="-1575" font-family="Courier bold italic" font-weight="bold" font-size="20.00" fill="white">proposal</text>
<polygon fill="none" stroke="black" points="742,-1539 742,-1566 832,-1566 832,-1539 742,-1539"/>
<text text-anchor="start" x="752.5" y="-1546.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Column</text>
<polygon fill="none" stroke="black" points="742,-1514 742,-1539 832,-1539 832,-1514 742,-1514"/>
<text text-anchor="start" x="745" y="-1520.8" font-family="Times,serif" font-size="16.00">row_id</text>
<polygon fill="#333333" stroke="none" points="742,-1492 742,-1514 832,-1514 832,-1492 742,-1492"/>
<polygon fill="none" stroke="black" points="742,-1492 742,-1514 832,-1514 832,-1492 742,-1492"/>
<text text-anchor="start" x="745" y="-1498.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="white">ABRIDGED</text>
</g>
<!-- ballot&#45;&gt;proposal -->
<g id="edge9" class="edge">
<title>ballot:proposal_out&#45;&gt;proposal:row_id</title>
<path fill="none" stroke="black" d="M484,-1526C594.54,-1526 624.85,-1526 730.22,-1526"/>
<polygon fill="black" stroke="black" points="730,-1529.5 740,-1526 730,-1522.5 730,-1529.5"/>
</g>
<!-- contribution -->
<g id="node2" class="node">
<title>contribution</title>
<polygon fill="#009879" stroke="none" points="520,-1200 520,-1230 1054,-1230 1054,-1200 520,-1200"/>
<polygon fill="none" stroke="black" points="520,-1200 520,-1230 1054,-1230 1054,-1200 520,-1200"/>
<text text-anchor="start" x="726.5" y="-1209" font-family="Courier bold italic" font-weight="bold" font-size="20.00" fill="white">contribution</text>
<polygon fill="none" stroke="black" points="520,-1173 520,-1200 653,-1200 653,-1173 520,-1173"/>
<text text-anchor="start" x="552" y="-1180.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Column</text>
<polygon fill="none" stroke="black" points="653,-1173 653,-1200 713,-1200 713,-1173 653,-1173"/>
<text text-anchor="start" x="662.5" y="-1180.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Type</text>
<polygon fill="none" stroke="black" points="713,-1173 713,-1200 1054,-1200 1054,-1173 713,-1173"/>
<text text-anchor="start" x="833" y="-1180.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Description</text>
<polygon fill="#54ff9f" stroke="none" points="520,-1148 520,-1173 653,-1173 653,-1148 520,-1148"/>
<polygon fill="none" stroke="black" points="520,-1148 520,-1173 653,-1173 653,-1148 520,-1148"/>
<text text-anchor="start" x="523" y="-1154.8" font-family="Times,serif" font-size="16.00">row_id</text>
<polygon fill="#54ff9f" stroke="none" points="653,-1148 653,-1173 713,-1173 713,-1148 653,-1148"/>
<polygon fill="none" stroke="black" points="653,-1148 653,-1173 713,-1173 713,-1148 653,-1148"/>
<text text-anchor="start" x="660" y="-1154.8" font-family="Times,serif" font-size="16.00">bigint+</text>
<polygon fill="#54ff9f" stroke="none" points="713,-1148 713,-1173 1054,-1173 1054,-1148 713,-1148"/>
<polygon fill="none" stroke="black" points="713,-1148 713,-1173 1054,-1173 1054,-1148 713,-1148"/>
<text text-anchor="start" x="716" y="-1156.6" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">Synthetic Unique Row Key</text>
<polygon fill="none" stroke="black" points="520,-1123 520,-1148 653,-1148 653,-1123 520,-1123"/>
<text text-anchor="start" x="523" y="-1129.8" font-family="Times,serif" font-size="16.00">stake_public_key</text>
<polygon fill="none" stroke="black" points="653,-1123 653,-1148 713,-1148 713,-1123 653,-1123"/>
<text text-anchor="start" x="671" y="-1129.8" font-family="Times,serif" font-size="16.00">text</text>
<polygon fill="none" stroke="black" points="713,-1123 713,-1148 1054,-1148 1054,-1123 713,-1123"/>
<text text-anchor="start" x="716" y="-1131.6" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The voters Stake Public Key</text>
<polygon fill="none" stroke="black" points="520,-1089 520,-1123 653,-1123 653,-1089 520,-1089"/>
<text text-anchor="start" x="523" y="-1100.4" font-family="Times,serif" font-size="16.00">snapshot_id</text>
<polygon fill="none" stroke="black" points="653,-1089 653,-1123 713,-1123 713,-1089 653,-1089"/>
<text text-anchor="start" x="661" y="-1100.4" font-family="Times,serif" font-size="16.00">integer</text>
<polygon fill="none" stroke="black" points="713,-1089 713,-1123 1054,-1123 1054,-1089 713,-1089"/>
<text text-anchor="start" x="716" y="-1107.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The snapshot this contribution was</text>
<text text-anchor="start" x="716" y="-1093.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">recorded from.</text>
<polygon fill="none" stroke="black" points="520,-1055 520,-1089 653,-1089 653,-1055 520,-1055"/>
<text text-anchor="start" x="523" y="-1066.4" font-family="Times,serif" font-size="16.00">voting_key</text>
<polygon fill="none" stroke="black" points="653,-1055 653,-1089 713,-1089 713,-1055 653,-1055"/>
<text text-anchor="start" x="671" y="-1067.4" font-family="Times,serif" font-style="italic" font-size="16.00">text</text>
<polygon fill="none" stroke="black" points="713,-1055 713,-1089 1054,-1089 1054,-1055 713,-1055"/>
<text text-anchor="start" x="716" y="-1073.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The voting key. &#160;If this is NULL it is</text>
<text text-anchor="start" x="716" y="-1059.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">the raw staked ADA.</text>
<polygon fill="none" stroke="black" points="520,-1021 520,-1055 653,-1055 653,-1021 520,-1021"/>
<text text-anchor="start" x="523" y="-1032.4" font-family="Times,serif" font-size="16.00">voting_weight</text>
<polygon fill="none" stroke="black" points="653,-1021 653,-1055 713,-1055 713,-1021 653,-1021"/>
<text text-anchor="start" x="661" y="-1033.4" font-family="Times,serif" font-style="italic" font-size="16.00">integer</text>
<polygon fill="none" stroke="black" points="713,-1021 713,-1055 1054,-1055 1054,-1021 713,-1021"/>
<text text-anchor="start" x="716" y="-1039.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The weight this voting key gets of the</text>
<text text-anchor="start" x="716" y="-1025.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">total.</text>
<polygon fill="none" stroke="black" points="520,-987 520,-1021 653,-1021 653,-987 520,-987"/>
<text text-anchor="start" x="523" y="-998.4" font-family="Times,serif" font-size="16.00">voting_key_idx</text>
<polygon fill="none" stroke="black" points="653,-987 653,-1021 713,-1021 713,-987 653,-987"/>
<text text-anchor="start" x="661" y="-999.4" font-family="Times,serif" font-style="italic" font-size="16.00">integer</text>
<polygon fill="none" stroke="black" points="713,-987 713,-1021 1054,-1021 1054,-987 713,-987"/>
<text text-anchor="start" x="716" y="-1005.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The index from 0 of the keys in the</text>
<text text-anchor="start" x="716" y="-991.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">delegation array.</text>
<polygon fill="none" stroke="black" points="520,-953 520,-987 653,-987 653,-953 520,-953"/>
<text text-anchor="start" x="523" y="-964.4" font-family="Times,serif" font-size="16.00">value</text>
<polygon fill="none" stroke="black" points="653,-953 653,-987 713,-987 713,-953 653,-953"/>
<text text-anchor="start" x="664.5" y="-964.4" font-family="Times,serif" font-size="16.00">bigint</text>
<polygon fill="none" stroke="black" points="713,-953 713,-987 1054,-987 1054,-953 713,-953"/>
<text text-anchor="start" x="716" y="-971.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The amount of ADA contributed to this</text>
<text text-anchor="start" x="716" y="-957.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">voting key from the stake address</text>
<polygon fill="none" stroke="black" points="520,-928 520,-953 653,-953 653,-928 520,-928"/>
<text text-anchor="start" x="523" y="-934.8" font-family="Times,serif" font-size="16.00">voting_group</text>
<polygon fill="none" stroke="black" points="653,-928 653,-953 713,-953 713,-928 653,-928"/>
<text text-anchor="start" x="671" y="-934.8" font-family="Times,serif" font-size="16.00">text</text>
<polygon fill="none" stroke="black" points="713,-928 713,-953 1054,-953 1054,-928 713,-928"/>
<text text-anchor="start" x="716" y="-936.6" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The group this contribution goes to.</text>
<polygon fill="none" stroke="black" points="520,-880 520,-928 653,-928 653,-880 520,-880"/>
<text text-anchor="start" x="523" y="-898.4" font-family="Times,serif" font-size="16.00">reward_address</text>
<polygon fill="none" stroke="black" points="653,-880 653,-928 713,-928 713,-880 653,-880"/>
<text text-anchor="start" x="671" y="-899.4" font-family="Times,serif" font-style="italic" font-size="16.00">text</text>
<polygon fill="none" stroke="black" points="713,-880 713,-928 1054,-928 1054,-880 713,-880"/>
<text text-anchor="start" x="716" y="-912.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">Currently Unused. &#160;Should be the Stake</text>
<text text-anchor="start" x="716" y="-898.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">Rewards address of the voter (currently</text>
<text text-anchor="start" x="716" y="-884.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">unknown.)</text>
<polygon fill="#333333" stroke="none" points="520,-858 520,-880 1054,-880 1054,-858 520,-858"/>
<polygon fill="none" stroke="black" points="520,-858 520,-880 1054,-880 1054,-858 520,-858"/>
<text text-anchor="start" x="523" y="-864.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="white">Individual Contributions from stake public keys to voting keys.</text>
</g>
<!-- snapshot -->
<g id="node3" class="node">
<title>snapshot</title>
<polygon fill="#009879" stroke="none" points="1090,-1265 1090,-1295 1707,-1295 1707,-1265 1090,-1265"/>
<polygon fill="none" stroke="black" points="1090,-1265 1090,-1295 1707,-1295 1707,-1265 1090,-1265"/>
<text text-anchor="start" x="1353" y="-1274" font-family="Courier bold italic" font-weight="bold" font-size="20.00" fill="white">snapshot</text>
<polygon fill="none" stroke="black" points="1090,-1238 1090,-1265 1292,-1265 1292,-1238 1090,-1238"/>
<text text-anchor="start" x="1156.5" y="-1245.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Column</text>
<polygon fill="none" stroke="black" points="1292,-1238 1292,-1265 1365,-1265 1365,-1238 1292,-1238"/>
<text text-anchor="start" x="1308" y="-1245.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Type</text>
<polygon fill="none" stroke="black" points="1365,-1238 1365,-1265 1707,-1265 1707,-1238 1365,-1238"/>
<text text-anchor="start" x="1485.5" y="-1245.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Description</text>
<polygon fill="#54ff9f" stroke="none" points="1090,-1213 1090,-1238 1292,-1238 1292,-1213 1090,-1213"/>
<polygon fill="none" stroke="black" points="1090,-1213 1090,-1238 1292,-1238 1292,-1213 1090,-1213"/>
<text text-anchor="start" x="1093" y="-1219.8" font-family="Times,serif" font-size="16.00">row_id</text>
<polygon fill="#54ff9f" stroke="none" points="1292,-1213 1292,-1238 1365,-1238 1365,-1213 1292,-1213"/>
<polygon fill="none" stroke="black" points="1292,-1213 1292,-1238 1365,-1238 1365,-1213 1292,-1213"/>
<text text-anchor="start" x="1302" y="-1219.8" font-family="Times,serif" font-size="16.00">integer+</text>
<polygon fill="#54ff9f" stroke="none" points="1365,-1213 1365,-1238 1707,-1238 1707,-1213 1365,-1213"/>
<polygon fill="none" stroke="black" points="1365,-1213 1365,-1238 1707,-1238 1707,-1213 1365,-1213"/>
<text text-anchor="start" x="1368" y="-1221.6" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">none</text>
<polygon fill="none" stroke="black" points="1090,-1188 1090,-1213 1292,-1213 1292,-1188 1090,-1188"/>
<text text-anchor="start" x="1093" y="-1194.8" font-family="Times,serif" font-size="16.00">event</text>
<polygon fill="none" stroke="black" points="1292,-1188 1292,-1213 1365,-1213 1365,-1188 1292,-1188"/>
<text text-anchor="start" x="1306.5" y="-1194.8" font-family="Times,serif" font-size="16.00">integer</text>
<polygon fill="none" stroke="black" points="1365,-1188 1365,-1213 1707,-1213 1707,-1188 1365,-1188"/>
<text text-anchor="start" x="1368" y="-1196.6" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The event id this snapshot was for.</text>
<polygon fill="none" stroke="black" points="1090,-1098 1090,-1188 1292,-1188 1292,-1098 1090,-1098"/>
<text text-anchor="start" x="1093" y="-1137.4" font-family="Times,serif" font-size="16.00">as_at</text>
<polygon fill="none" stroke="black" points="1292,-1098 1292,-1188 1365,-1188 1365,-1098 1292,-1098"/>
<text text-anchor="start" x="1295" y="-1137.4" font-family="Times,serif" font-size="16.00">timestamp</text>
<polygon fill="none" stroke="black" points="1365,-1098 1365,-1188 1707,-1188 1707,-1098 1365,-1098"/>
<text text-anchor="start" x="1368" y="-1172.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The time the snapshot was collected</text>
<text text-anchor="start" x="1368" y="-1158.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">from dbsync.</text>
<text text-anchor="start" x="1368" y="-1144.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">This is the snapshot *DEADLINE*, i.e the</text>
<text text-anchor="start" x="1368" y="-1130.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">time when registrations are final.</text>
<text text-anchor="start" x="1368" y="-1116.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">(Should be the slot time the</text>
<text text-anchor="start" x="1368" y="-1102.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">dbsync_snapshot_cmd was run against.)</text>
<polygon fill="none" stroke="black" points="1090,-1036 1090,-1098 1292,-1098 1292,-1036 1090,-1036"/>
<text text-anchor="start" x="1093" y="-1061.4" font-family="Times,serif" font-size="16.00">last_updated</text>
<polygon fill="none" stroke="black" points="1292,-1036 1292,-1098 1365,-1098 1365,-1036 1292,-1036"/>
<text text-anchor="start" x="1295" y="-1061.4" font-family="Times,serif" font-size="16.00">timestamp</text>
<polygon fill="none" stroke="black" points="1365,-1036 1365,-1098 1707,-1098 1707,-1036 1365,-1036"/>
<text text-anchor="start" x="1368" y="-1082.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The last time the snapshot was run</text>
<text text-anchor="start" x="1368" y="-1068.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">(Should be the latest block time taken</text>
<text text-anchor="start" x="1368" y="-1054.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">from dbsync just before the snapshot</text>
<text text-anchor="start" x="1368" y="-1040.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">was run.)</text>
<polygon fill="none" stroke="black" points="1090,-988 1090,-1036 1292,-1036 1292,-988 1090,-988"/>
<text text-anchor="start" x="1093" y="-1006.4" font-family="Times,serif" font-size="16.00">final</text>
<polygon fill="none" stroke="black" points="1292,-988 1292,-1036 1365,-1036 1365,-988 1292,-988"/>
<text text-anchor="start" x="1303.5" y="-1006.4" font-family="Times,serif" font-size="16.00">boolean</text>
<polygon fill="none" stroke="black" points="1365,-988 1365,-1036 1707,-1036 1707,-988 1365,-988"/>
<text text-anchor="start" x="1368" y="-1020.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">Is the snapshot Final?</text>
<text text-anchor="start" x="1368" y="-1006.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">No more updates will occur to this</text>
<text text-anchor="start" x="1368" y="-992.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">record once set.</text>
<polygon fill="none" stroke="black" points="1090,-954 1090,-988 1292,-988 1292,-954 1090,-954"/>
<text text-anchor="start" x="1093" y="-965.4" font-family="Times,serif" font-size="16.00">dbsync_snapshot_cmd</text>
<polygon fill="none" stroke="black" points="1292,-954 1292,-988 1365,-988 1365,-954 1292,-954"/>
<text text-anchor="start" x="1316.5" y="-966.4" font-family="Times,serif" font-style="italic" font-size="16.00">text</text>
<polygon fill="none" stroke="black" points="1365,-954 1365,-988 1707,-988 1707,-954 1365,-954"/>
<text text-anchor="start" x="1368" y="-972.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The name of the command run to collect</text>
<text text-anchor="start" x="1368" y="-958.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">the snapshot from dbsync.</text>
<polygon fill="none" stroke="black" points="1090,-906 1090,-954 1292,-954 1292,-906 1090,-906"/>
<text text-anchor="start" x="1093" y="-924.4" font-family="Times,serif" font-size="16.00">dbsync_snapshot_params</text>
<polygon fill="none" stroke="black" points="1292,-906 1292,-954 1365,-954 1365,-906 1292,-906"/>
<text text-anchor="start" x="1311" y="-925.4" font-family="Times,serif" font-style="italic" font-size="16.00">jsonb</text>
<polygon fill="none" stroke="black" points="1365,-906 1365,-954 1707,-954 1707,-906 1365,-906"/>
<text text-anchor="start" x="1368" y="-938.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The parameters passed to the command,</text>
<text text-anchor="start" x="1368" y="-924.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">each parameter is a key and its value is</text>
<text text-anchor="start" x="1368" y="-910.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">the value of the parameter.</text>
<polygon fill="none" stroke="black" points="1090,-816 1090,-906 1292,-906 1292,-816 1090,-816"/>
<text text-anchor="start" x="1093" y="-855.4" font-family="Times,serif" font-size="16.00">dbsync_snapshot_data</text>
<polygon fill="none" stroke="black" points="1292,-816 1292,-906 1365,-906 1365,-816 1292,-816"/>
<text text-anchor="start" x="1311.5" y="-856.4" font-family="Times,serif" font-style="italic" font-size="16.00">bytea</text>
<polygon fill="none" stroke="black" points="1365,-816 1365,-906 1707,-906 1707,-816 1365,-816"/>
<text text-anchor="start" x="1368" y="-890.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The BROTLI COMPRESSED raw json result</text>
<text text-anchor="start" x="1368" y="-876.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">stored as BINARY from the dbsync</text>
<text text-anchor="start" x="1368" y="-862.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">snapshot.</text>
<text text-anchor="start" x="1368" y="-848.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">(This is JSON data but we store as raw</text>
<text text-anchor="start" x="1368" y="-834.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">text to prevent any processing of it,</text>
<text text-anchor="start" x="1368" y="-820.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">and BROTLI compress to save space).</text>
<polygon fill="none" stroke="black" points="1090,-726 1090,-816 1292,-816 1292,-726 1090,-726"/>
<text text-anchor="start" x="1093" y="-765.4" font-family="Times,serif" font-size="16.00">dbsync_snapshot_error</text>
<polygon fill="none" stroke="black" points="1292,-726 1292,-816 1365,-816 1365,-726 1292,-726"/>
<text text-anchor="start" x="1311.5" y="-766.4" font-family="Times,serif" font-style="italic" font-size="16.00">bytea</text>
<polygon fill="none" stroke="black" points="1365,-726 1365,-816 1707,-816 1707,-726 1365,-726"/>
<text text-anchor="start" x="1368" y="-800.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The BROTLI COMPRESSED raw json errors</text>
<text text-anchor="start" x="1368" y="-786.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">stored as BINARY from the dbsync</text>
<text text-anchor="start" x="1368" y="-772.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">snapshot.</text>
<text text-anchor="start" x="1368" y="-758.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">(This is JSON data but we store as raw</text>
<text text-anchor="start" x="1368" y="-744.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">text to prevent any processing of it,</text>
<text text-anchor="start" x="1368" y="-730.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">and BROTLI compress to save space).</text>
<polygon fill="none" stroke="black" points="1090,-636 1090,-726 1292,-726 1292,-636 1090,-636"/>
<text text-anchor="start" x="1093" y="-675.4" font-family="Times,serif" font-size="16.00">dbsync_snapshot_unregistered</text>
<polygon fill="none" stroke="black" points="1292,-636 1292,-726 1365,-726 1365,-636 1292,-636"/>
<text text-anchor="start" x="1311.5" y="-676.4" font-family="Times,serif" font-style="italic" font-size="16.00">bytea</text>
<polygon fill="none" stroke="black" points="1365,-636 1365,-726 1707,-726 1707,-636 1365,-636"/>
<text text-anchor="start" x="1368" y="-710.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The BROTLI COMPRESSED unregistered</text>
<text text-anchor="start" x="1368" y="-696.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">voting power stored as BINARY from the</text>
<text text-anchor="start" x="1368" y="-682.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">dbsync snapshot.</text>
<text text-anchor="start" x="1368" y="-668.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">(This is JSON data but we store as raw</text>
<text text-anchor="start" x="1368" y="-654.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">text to prevent any processing of it,</text>
<text text-anchor="start" x="1368" y="-640.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">and BROTLI compress to save space).</text>
<polygon fill="none" stroke="black" points="1090,-532 1090,-636 1292,-636 1292,-532 1090,-532"/>
<text text-anchor="start" x="1093" y="-578.4" font-family="Times,serif" font-size="16.00">drep_data</text>
<polygon fill="none" stroke="black" points="1292,-532 1292,-636 1365,-636 1365,-532 1292,-532"/>
<text text-anchor="start" x="1311.5" y="-579.4" font-family="Times,serif" font-style="italic" font-size="16.00">bytea</text>
<polygon fill="none" stroke="black" points="1365,-532 1365,-636 1707,-636 1707,-532 1365,-532"/>
<text text-anchor="start" x="1368" y="-620.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The latest drep data obtained from GVC,</text>
<text text-anchor="start" x="1368" y="-606.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">and used in this snapshot calculation.</text>
<text text-anchor="start" x="1368" y="-592.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">Should be in a form directly usable by</text>
<text text-anchor="start" x="1368" y="-578.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">the `catalyst_snapshot_cmd`</text>
<text text-anchor="start" x="1368" y="-564.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">However, in order to save space this</text>
<text text-anchor="start" x="1368" y="-550.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">data is stored as BROTLI COMPRESSED</text>
<text text-anchor="start" x="1368" y="-536.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">BINARY.</text>
<polygon fill="none" stroke="black" points="1090,-484 1090,-532 1292,-532 1292,-484 1090,-484"/>
<text text-anchor="start" x="1093" y="-502.4" font-family="Times,serif" font-size="16.00">catalyst_snapshot_cmd</text>
<polygon fill="none" stroke="black" points="1292,-484 1292,-532 1365,-532 1365,-484 1292,-484"/>
<text text-anchor="start" x="1316.5" y="-503.4" font-family="Times,serif" font-style="italic" font-size="16.00">text</text>
<polygon fill="none" stroke="black" points="1365,-484 1365,-532 1707,-532 1707,-484 1365,-484"/>
<text text-anchor="start" x="1368" y="-516.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The actual name of the command run</text>
<text text-anchor="start" x="1368" y="-502.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">to produce the catalyst voting power</text>
<text text-anchor="start" x="1368" y="-488.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">snapshot.</text>
<polygon fill="none" stroke="black" points="1090,-459 1090,-484 1292,-484 1292,-459 1090,-459"/>
<text text-anchor="start" x="1093" y="-465.8" font-family="Times,serif" font-size="16.00">catalyst_snapshot_params</text>
<polygon fill="none" stroke="black" points="1292,-459 1292,-484 1365,-484 1365,-459 1292,-459"/>
<text text-anchor="start" x="1311" y="-466.8" font-family="Times,serif" font-style="italic" font-size="16.00">jsonb</text>
<polygon fill="none" stroke="black" points="1365,-459 1365,-484 1707,-484 1707,-459 1365,-459"/>
<text text-anchor="start" x="1368" y="-467.6" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">none</text>
<polygon fill="none" stroke="black" points="1090,-369 1090,-459 1292,-459 1292,-369 1090,-369"/>
<text text-anchor="start" x="1093" y="-408.4" font-family="Times,serif" font-size="16.00">catalyst_snapshot_data</text>
<polygon fill="none" stroke="black" points="1292,-369 1292,-459 1365,-459 1365,-369 1292,-369"/>
<text text-anchor="start" x="1311.5" y="-409.4" font-family="Times,serif" font-style="italic" font-size="16.00">bytea</text>
<polygon fill="none" stroke="black" points="1365,-369 1365,-459 1707,-459 1707,-369 1365,-369"/>
<text text-anchor="start" x="1368" y="-443.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The BROTLI COMPRESSED raw yaml result</text>
<text text-anchor="start" x="1368" y="-429.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">stored as BINARY from the catalyst</text>
<text text-anchor="start" x="1368" y="-415.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">snapshot calculation.</text>
<text text-anchor="start" x="1368" y="-401.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">(This is YAML data but we store as raw</text>
<text text-anchor="start" x="1368" y="-387.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">text to prevent any processing of it,</text>
<text text-anchor="start" x="1368" y="-373.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">and BROTLI compress to save space).</text>
<polygon fill="#333333" stroke="none" points="1090,-335 1090,-369 1707,-369 1707,-335 1090,-335"/>
<polygon fill="none" stroke="black" points="1090,-335 1090,-369 1707,-369 1707,-335 1090,-335"/>
<text text-anchor="start" x="1093" y="-353.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="white">Raw snapshot data for an event.</text>
<text text-anchor="start" x="1093" y="-339.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="white">Only the latests snapshot per event is stored.</text>
</g>
<!-- contribution&#45;&gt;snapshot -->
<g id="edge6" class="edge">
<title>contribution:snapshot_id_out&#45;&gt;snapshot:row_id</title>
<path fill="none" stroke="black" d="M1054,-1106C1105.33,-1106 1045.29,-1207.98 1079.22,-1223.92"/>
<polygon fill="black" stroke="black" points="1078.52,-1227.54 1089,-1226 1079.85,-1220.67 1078.52,-1227.54"/>
</g>
<!-- event -->
<g id="node6" class="node">
<title>event</title>
<polygon fill="#009879" stroke="none" points="1809,-789 1809,-819 1884,-819 1884,-789 1809,-789"/>
<polygon fill="none" stroke="black" points="1809,-789 1809,-819 1884,-819 1884,-789 1809,-789"/>
<text text-anchor="start" x="1818.5" y="-798" font-family="Courier bold italic" font-weight="bold" font-size="20.00" fill="white">event</text>
<polygon fill="none" stroke="black" points="1809,-762 1809,-789 1884,-789 1884,-762 1809,-762"/>
<text text-anchor="start" x="1812" y="-769.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Column</text>
<polygon fill="none" stroke="black" points="1809,-737 1809,-762 1884,-762 1884,-737 1809,-737"/>
<text text-anchor="start" x="1812" y="-743.8" font-family="Times,serif" font-size="16.00">row_id</text>
<polygon fill="#333333" stroke="none" points="1809,-715 1809,-737 1884,-737 1884,-715 1809,-715"/>
<polygon fill="none" stroke="black" points="1809,-715 1809,-737 1884,-737 1884,-715 1809,-715"/>
<text text-anchor="start" x="1812" y="-721.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="white">ABRIDGED</text>
</g>
<!-- snapshot&#45;&gt;event -->
<g id="edge4" class="edge">
<title>snapshot:event_out&#45;&gt;event:row_id</title>
<path fill="none" stroke="black" d="M1707,-1201C1908.98,-1201 1613.07,-765.62 1796.57,-749.46"/>
<polygon fill="black" stroke="black" points="1796.66,-752.92 1806.5,-749 1796.36,-745.92 1796.66,-752.92"/>
</g>
<!-- voteplan -->
<g id="node4" class="node">
<title>voteplan</title>
<polygon fill="#009879" stroke="none" points="1158.5,-286.5 1158.5,-316.5 1638.5,-316.5 1638.5,-286.5 1158.5,-286.5"/>
<polygon fill="none" stroke="black" points="1158.5,-286.5 1158.5,-316.5 1638.5,-316.5 1638.5,-286.5 1158.5,-286.5"/>
<text text-anchor="start" x="1355" y="-295.5" font-family="Courier bold italic" font-weight="bold" font-size="20.00" fill="white">voteplan</text>
<polygon fill="none" stroke="black" points="1158.5,-259.5 1158.5,-286.5 1263.5,-286.5 1263.5,-259.5 1158.5,-259.5"/>
<text text-anchor="start" x="1176.5" y="-267.4" font-family="Courier bold" font-weight="bold" font-size="18.00">Column</text>
<polygon fill="none" stroke="black" points="1263.5,-259.5 1263.5,-286.5 1322.5,-286.5 1322.5,-259.5 1263.5,-259.5"/>
<text text-anchor="start" x="1272.5" y="-267.4" font-family="Courier bold" font-weight="bold" font-size="18.00">Type</text>
<polygon fill="none" stroke="black" points="1322.5,-259.5 1322.5,-286.5 1638.5,-286.5 1638.5,-259.5 1322.5,-259.5"/>
<text text-anchor="start" x="1430" y="-267.4" font-family="Courier bold" font-weight="bold" font-size="18.00">Description</text>
<polygon fill="#54ff9f" stroke="none" points="1158.5,-234.5 1158.5,-259.5 1263.5,-259.5 1263.5,-234.5 1158.5,-234.5"/>
<polygon fill="none" stroke="black" points="1158.5,-234.5 1158.5,-259.5 1263.5,-259.5 1263.5,-234.5 1158.5,-234.5"/>
<text text-anchor="start" x="1161.5" y="-241.3" font-family="Times,serif" font-size="16.00">row_id</text>
<polygon fill="#54ff9f" stroke="none" points="1263.5,-234.5 1263.5,-259.5 1322.5,-259.5 1322.5,-234.5 1263.5,-234.5"/>
<polygon fill="none" stroke="black" points="1263.5,-234.5 1263.5,-259.5 1322.5,-259.5 1322.5,-234.5 1263.5,-234.5"/>
<text text-anchor="start" x="1266.5" y="-241.3" font-family="Times,serif" font-size="16.00">integer+</text>
<polygon fill="#54ff9f" stroke="none" points="1322.5,-234.5 1322.5,-259.5 1638.5,-259.5 1638.5,-234.5 1322.5,-234.5"/>
<polygon fill="none" stroke="black" points="1322.5,-234.5 1322.5,-259.5 1638.5,-259.5 1638.5,-234.5 1322.5,-234.5"/>
<text text-anchor="start" x="1325.5" y="-243.1" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">Synthetic Unique Key</text>
<polygon fill="none" stroke="black" points="1158.5,-209.5 1158.5,-234.5 1263.5,-234.5 1263.5,-209.5 1158.5,-209.5"/>
<text text-anchor="start" x="1161.5" y="-216.3" font-family="Times,serif" font-size="16.00">event_id</text>
<polygon fill="none" stroke="black" points="1263.5,-209.5 1263.5,-234.5 1322.5,-234.5 1322.5,-209.5 1263.5,-209.5"/>
<text text-anchor="start" x="1271" y="-216.3" font-family="Times,serif" font-size="16.00">integer</text>
<polygon fill="none" stroke="black" points="1322.5,-209.5 1322.5,-234.5 1638.5,-234.5 1638.5,-209.5 1322.5,-209.5"/>
<text text-anchor="start" x="1325.5" y="-218.1" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">none</text>
<polygon fill="none" stroke="black" points="1158.5,-161.5 1158.5,-209.5 1263.5,-209.5 1263.5,-161.5 1158.5,-161.5"/>
<text text-anchor="start" x="1161.5" y="-179.9" font-family="Times,serif" font-size="16.00">id</text>
<polygon fill="none" stroke="black" points="1263.5,-161.5 1263.5,-209.5 1322.5,-209.5 1322.5,-161.5 1263.5,-161.5"/>
<text text-anchor="start" x="1269" y="-179.9" font-family="Times,serif" font-size="16.00">varchar</text>
<polygon fill="none" stroke="black" points="1322.5,-161.5 1322.5,-209.5 1638.5,-209.5 1638.5,-161.5 1322.5,-161.5"/>
<text text-anchor="start" x="1325.5" y="-194.2" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The ID of the Vote plan in the voting</text>
<text text-anchor="start" x="1325.5" y="-180.2" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">ledger/bulletin board.</text>
<text text-anchor="start" x="1325.5" y="-166.2" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">A Binary value encoded as hex.</text>
<polygon fill="none" stroke="black" points="1158.5,-127.5 1158.5,-161.5 1263.5,-161.5 1263.5,-127.5 1158.5,-127.5"/>
<text text-anchor="start" x="1161.5" y="-138.9" font-family="Times,serif" font-size="16.00">category</text>
<polygon fill="none" stroke="black" points="1263.5,-127.5 1263.5,-161.5 1322.5,-161.5 1322.5,-127.5 1263.5,-127.5"/>
<text text-anchor="start" x="1281" y="-138.9" font-family="Times,serif" font-size="16.00">text</text>
<polygon fill="none" stroke="black" points="1322.5,-127.5 1322.5,-161.5 1638.5,-161.5 1638.5,-127.5 1322.5,-127.5"/>
<text text-anchor="start" x="1325.5" y="-146.2" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The kind of vote which can be cast on</text>
<text text-anchor="start" x="1325.5" y="-132.2" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">this vote plan.</text>
<polygon fill="none" stroke="black" points="1158.5,-79.5 1158.5,-127.5 1263.5,-127.5 1263.5,-79.5 1158.5,-79.5"/>
<text text-anchor="start" x="1161.5" y="-97.9" font-family="Times,serif" font-size="16.00">encryption_key</text>
<polygon fill="none" stroke="black" points="1263.5,-79.5 1263.5,-127.5 1322.5,-127.5 1322.5,-79.5 1263.5,-79.5"/>
<text text-anchor="start" x="1269" y="-98.9" font-family="Times,serif" font-style="italic" font-size="16.00">varchar</text>
<polygon fill="none" stroke="black" points="1322.5,-79.5 1322.5,-127.5 1638.5,-127.5 1638.5,-79.5 1322.5,-79.5"/>
<text text-anchor="start" x="1325.5" y="-112.2" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The public encryption key used.</text>
<text text-anchor="start" x="1325.5" y="-98.2" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">ONLY if required by the voteplan</text>
<text text-anchor="start" x="1325.5" y="-84.2" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">category.</text>
<polygon fill="none" stroke="black" points="1158.5,-45.5 1158.5,-79.5 1263.5,-79.5 1263.5,-45.5 1158.5,-45.5"/>
<text text-anchor="start" x="1161.5" y="-56.9" font-family="Times,serif" font-size="16.00">group_id</text>
<polygon fill="none" stroke="black" points="1263.5,-45.5 1263.5,-79.5 1322.5,-79.5 1322.5,-45.5 1263.5,-45.5"/>
<text text-anchor="start" x="1271" y="-57.9" font-family="Times,serif" font-style="italic" font-size="16.00">integer</text>
<polygon fill="none" stroke="black" points="1322.5,-45.5 1322.5,-79.5 1638.5,-79.5 1638.5,-45.5 1322.5,-45.5"/>
<text text-anchor="start" x="1325.5" y="-64.2" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">The identifier of voting power token</text>
<text text-anchor="start" x="1325.5" y="-50.2" font-family="Monospace" font-style="italic" font-size="14.00" fill="#7f7f7f">used withing this plan.</text>
<polygon fill="#333333" stroke="none" points="1158.5,-23.5 1158.5,-45.5 1638.5,-45.5 1638.5,-23.5 1158.5,-23.5"/>
<polygon fill="none" stroke="black" points="1158.5,-23.5 1158.5,-45.5 1638.5,-45.5 1638.5,-23.5 1158.5,-23.5"/>
<text text-anchor="start" x="1161.5" y="-30.2" font-family="Monospace" font-style="italic" font-size="14.00" fill="white">All Vote plans.</text>
</g>
<!-- voteplan&#45;&gt;event -->
<g id="edge1" class="edge">
<title>voteplan:event_id_out&#45;&gt;event:row_id</title>
<path fill="none" stroke="black" d="M1639.5,-222C1881.61,-222 1571.33,-733.17 1796.72,-748.64"/>
<polygon fill="black" stroke="black" points="1796.39,-752.17 1806.5,-749 1796.62,-745.17 1796.39,-752.17"/>
</g>
<!-- voteplan_category -->
<g id="node9" class="node">
<title>voteplan_category</title>
<polygon fill="#009879" stroke="none" points="1751,-208 1751,-238 1942,-238 1942,-208 1751,-208"/>
<polygon fill="none" stroke="black" points="1751,-208 1751,-238 1942,-238 1942,-208 1751,-208"/>
<text text-anchor="start" x="1754" y="-217" font-family="Courier bold italic" font-weight="bold" font-size="20.00" fill="white">voteplan_category</text>
<polygon fill="none" stroke="black" points="1751,-181 1751,-208 1942,-208 1942,-181 1751,-181"/>
<text text-anchor="start" x="1812" y="-188.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Column</text>
<polygon fill="none" stroke="black" points="1751,-156 1751,-181 1942,-181 1942,-156 1751,-156"/>
<text text-anchor="start" x="1754" y="-162.8" font-family="Times,serif" font-size="16.00">name</text>
<polygon fill="#333333" stroke="none" points="1751,-134 1751,-156 1942,-156 1942,-134 1751,-134"/>
<polygon fill="none" stroke="black" points="1751,-134 1751,-156 1942,-156 1942,-134 1751,-134"/>
<text text-anchor="start" x="1754" y="-140.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="white">ABRIDGED</text>
</g>
<!-- voteplan&#45;&gt;voteplan_category -->
<g id="edge2" class="edge">
<title>voteplan:category_out&#45;&gt;voteplan_category:name</title>
<path fill="none" stroke="black" d="M1639.5,-144C1685.73,-144 1697.72,-164.48 1738.73,-167.6"/>
<polygon fill="black" stroke="black" points="1738.38,-171.13 1748.5,-168 1738.64,-164.13 1738.38,-171.13"/>
</g>
<!-- voting_group -->
<g id="node10" class="node">
<title>voting_group</title>
<polygon fill="#009879" stroke="none" points="1778,-78 1778,-108 1915,-108 1915,-78 1778,-78"/>
<polygon fill="none" stroke="black" points="1778,-78 1778,-108 1915,-108 1915,-78 1778,-78"/>
<text text-anchor="start" x="1781" y="-87" font-family="Courier bold italic" font-weight="bold" font-size="20.00" fill="white">voting_group</text>
<polygon fill="none" stroke="black" points="1778,-51 1778,-78 1915,-78 1915,-51 1778,-51"/>
<text text-anchor="start" x="1812" y="-58.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Column</text>
<polygon fill="none" stroke="black" points="1778,-26 1778,-51 1915,-51 1915,-26 1778,-26"/>
<text text-anchor="start" x="1781" y="-32.8" font-family="Times,serif" font-size="16.00">row_id</text>
<polygon fill="#333333" stroke="none" points="1778,-4 1778,-26 1915,-26 1915,-4 1778,-4"/>
<polygon fill="none" stroke="black" points="1778,-4 1778,-26 1915,-26 1915,-4 1778,-4"/>
<text text-anchor="start" x="1781" y="-10.7" font-family="Monospace" font-style="italic" font-size="14.00" fill="white">ABRIDGED</text>
</g>
<!-- voteplan&#45;&gt;voting_group -->
<g id="edge3" class="edge">
<title>voteplan:group_id_out&#45;&gt;voting_group:row_id</title>
<path fill="none" stroke="black" d="M1639.5,-62C1697.57,-62 1712.89,-40.82 1765.78,-38.25"/>
<polygon fill="black" stroke="black" points="1765.59,-41.74 1775.5,-38 1765.42,-34.74 1765.59,-41.74"/>
</g>
<!-- voter&#45;&gt;snapshot -->
<g id="edge5" class="edge">
<title>voter:snapshot_id_out&#45;&gt;snapshot:row_id</title>
<path fill="none" stroke="black" d="M1028,-1346C1083.93,-1346 1037.36,-1241.85 1079.27,-1227.61"/>
<polygon fill="black" stroke="black" points="1079.63,-1230.94 1089,-1226 1078.59,-1224.02 1079.63,-1230.94"/>
</g>
<!-- LEGEND -->
<g id="node11" class="node">
<title>LEGEND</title>
<polygon fill="Pink" stroke="none" points="131,-1847 131,-1877 353,-1877 353,-1847 131,-1847"/>
<polygon fill="none" stroke="black" points="131,-1847 131,-1877 353,-1877 353,-1847 131,-1847"/>
<text text-anchor="start" x="202" y="-1856" font-family="Courier bold italic" font-weight="bold" font-size="20.00" fill="white">LEGEND</text>
<polygon fill="none" stroke="black" points="131,-1820 131,-1847 270,-1847 270,-1820 131,-1820"/>
<text text-anchor="start" x="180" y="-1827.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Type</text>
<polygon fill="none" stroke="black" points="270,-1820 270,-1847 353,-1847 353,-1820 270,-1820"/>
<text text-anchor="start" x="273" y="-1827.9" font-family="Courier bold" font-weight="bold" font-size="18.00">Example</text>
<polygon fill="#54ff9f" stroke="none" points="131,-1795 131,-1820 270,-1820 270,-1795 131,-1795"/>
<polygon fill="none" stroke="black" points="131,-1795 131,-1820 270,-1820 270,-1795 131,-1795"/>
<text text-anchor="start" x="134" y="-1801.8" font-family="Times,serif" font-size="16.00">Primary Key</text>
<polygon fill="#54ff9f" stroke="none" points="270,-1795 270,-1820 353,-1820 353,-1795 270,-1795"/>
<polygon fill="none" stroke="black" points="270,-1795 270,-1820 353,-1820 353,-1795 270,-1795"/>
<text text-anchor="start" x="285" y="-1801.8" font-family="Times,serif" font-size="16.00">integer+</text>
<polygon fill="none" stroke="black" points="131,-1770 131,-1795 270,-1795 270,-1770 131,-1770"/>
<text text-anchor="start" x="134" y="-1776.8" font-family="Times,serif" font-size="16.00">Standard Field</text>
<polygon fill="none" stroke="black" points="270,-1770 270,-1795 353,-1795 353,-1770 270,-1770"/>
<text text-anchor="start" x="294.5" y="-1776.8" font-family="Times,serif" font-size="16.00">bytea</text>
<polygon fill="none" stroke="black" points="131,-1745 131,-1770 270,-1770 270,-1745 131,-1745"/>
<text text-anchor="start" x="134" y="-1751.8" font-family="Times,serif" font-size="16.00">Nullable Field</text>
<polygon fill="none" stroke="black" points="270,-1745 270,-1770 353,-1770 353,-1745 270,-1745"/>
<text text-anchor="start" x="299.5" y="-1752.8" font-family="Times,serif" font-style="italic" font-size="16.00">text</text>
<polygon fill="none" stroke="black" points="131,-1720 131,-1745 270,-1745 270,-1720 131,-1720"/>
<text text-anchor="start" x="134" y="-1726.8" font-family="Times,serif" font-size="16.00">Sized Field</text>
<polygon fill="none" stroke="black" points="270,-1720 270,-1745 353,-1745 353,-1720 270,-1720"/>
<text text-anchor="start" x="274.5" y="-1726.8" font-family="Times,serif" font-size="16.00">varchar(32)</text>
<polygon fill="none" stroke="black" points="131,-1695 131,-1720 270,-1720 270,-1695 131,-1695"/>
<text text-anchor="start" x="134" y="-1701.8" font-family="Times,serif" font-size="16.00">Autoincrement Field</text>
<polygon fill="none" stroke="black" points="270,-1695 270,-1720 353,-1720 353,-1695 270,-1695"/>
<text text-anchor="start" x="285" y="-1701.8" font-family="Times,serif" font-size="16.00">integer+</text>
</g>
</g>
</svg>
</pre>
<h2 id="snapshot-schema"><a class="header" href="#snapshot-schema">Snapshot Schema</a></h2>
<pre><code class="language-sql">-- Catalyst Event Database

-- Voting Power Snapshot Table

CREATE TABLE snapshot (
    row_id SERIAL PRIMARY KEY,
    event INTEGER NOT NULL UNIQUE,
    as_at TIMESTAMP NOT NULL,
    last_updated TIMESTAMP NOT NULL,
    final BOOLEAN NOT NULL,

    dbsync_snapshot_cmd          TEXT NULL,
    dbsync_snapshot_params       JSONB NULL,
    dbsync_snapshot_data         BYTEA NULL,
    dbsync_snapshot_error        BYTEA NULL,
    dbsync_snapshot_unregistered BYTEA NULL,

    drep_data                    BYTEA NULL,

    catalyst_snapshot_cmd        TEXT NULL,
    catalyst_snapshot_params     JSONB NULL,
    catalyst_snapshot_data       BYTEA NULL,

    FOREIGN KEY(event) REFERENCES event(row_id)  ON DELETE CASCADE
);

COMMENT ON TABLE snapshot IS
'Raw snapshot data for an event.
Only the latests snapshot per event is stored.';
COMMENT ON COLUMN snapshot.event is 'The event id this snapshot was for.';
COMMENT ON COLUMN snapshot.as_at is
'The time the snapshot was collected from dbsync.
This is the snapshot *DEADLINE*, i.e the time when registrations are final.
(Should be the slot time the dbsync_snapshot_cmd was run against.)';
COMMENT ON COLUMN snapshot.last_updated is
'The last time the snapshot was run
(Should be the latest block time taken from dbsync just before the snapshot was run.)';
COMMENT ON COLUMN snapshot.final is
'Is the snapshot Final?
No more updates will occur to this record once set.';

COMMENT ON COLUMN snapshot.dbsync_snapshot_cmd is     'The name of the command run to collect the snapshot from dbsync.';
COMMENT ON COLUMN snapshot.dbsync_snapshot_params is  'The parameters passed to the command, each parameter is a key and its value is the value of the parameter.';
COMMENT ON COLUMN snapshot.dbsync_snapshot_data is
'The BROTLI COMPRESSED raw json result stored as BINARY from the dbsync snapshot.
(This is JSON data but we store as raw text to prevent any processing of it, and BROTLI compress to save space).';
COMMENT ON COLUMN snapshot.dbsync_snapshot_error is
'The BROTLI COMPRESSED raw json errors stored as BINARY from the dbsync snapshot.
(This is JSON data but we store as raw text to prevent any processing of it, and BROTLI compress to save space).';
COMMENT ON COLUMN snapshot.dbsync_snapshot_unregistered is
'The BROTLI COMPRESSED unregistered voting power stored as BINARY from the dbsync snapshot.
(This is JSON data but we store as raw text to prevent any processing of it, and BROTLI compress to save space).';

COMMENT ON COLUMN snapshot.drep_data is
'The latest drep data obtained from GVC, and used in this snapshot calculation.
Should be in a form directly usable by the `catalyst_snapshot_cmd`
However, in order to save space this data is stored as BROTLI COMPRESSED BINARY.';

COMMENT ON COLUMN snapshot.catalyst_snapshot_cmd is  'The actual name of the command run to produce the catalyst voting power snapshot.';
COMMENT ON COLUMN snapshot.dbsync_snapshot_params is 'The parameters passed to the command, each parameter is a key and its value is the value of the parameter.';
COMMENT ON COLUMN snapshot.catalyst_snapshot_data is
'The BROTLI COMPRESSED raw yaml result stored as BINARY from the catalyst snapshot calculation.
(This is YAML data but we store as raw text to prevent any processing of it, and BROTLI compress to save space).';

-- voters

CREATE TABLE voter (
    row_id SERIAL8 PRIMARY KEY,

    voting_key TEXT NOT NULL,
    snapshot_id INTEGER NOT NULL,
    voting_group TEXT NOT NULL,

    voting_power BIGINT NOT NULL,

    FOREIGN KEY(snapshot_id) REFERENCES snapshot(row_id) ON DELETE CASCADE
);

CREATE UNIQUE INDEX unique_voter_id on voter (voting_key, voting_group, snapshot_id);

COMMENT ON TABLE voter IS 'Voting Power for every voting key.';
COMMENT ON COLUMN voter.voting_key is 'Either the voting key.';
COMMENT ON COLUMN voter.snapshot_id is 'The ID of the snapshot this record belongs to.';
COMMENT ON COLUMN voter.voting_group is 'The voter group the voter belongs to.';
COMMENT ON COLUMN voter.voting_power is 'Calculated Voting Power associated with this key.';

-- contributions

CREATE TABLE contribution (
    row_id SERIAL8 PRIMARY KEY,

    stake_public_key TEXT NOT NULL,
    snapshot_id INTEGER NOT NULL,

    voting_key TEXT NULL,
    voting_weight INTEGER NULL,
    voting_key_idx INTEGER NULL,
    value BIGINT NOT NULL,

    voting_group TEXT NOT NULL,

    reward_address TEXT NULL,

    FOREIGN KEY(snapshot_id) REFERENCES snapshot(row_id) ON DELETE CASCADE
);

CREATE UNIQUE INDEX unique_contribution_id ON contribution (stake_public_key, voting_key, voting_group, snapshot_id);

COMMENT ON TABLE contribution IS 'Individual Contributions from stake public keys to voting keys.';
COMMENT ON COLUMN contribution.row_id is 'Synthetic Unique Row Key';
COMMENT ON COLUMN contribution.stake_public_key IS 'The voters Stake Public Key';
COMMENT ON COLUMN contribution.snapshot_id IS 'The snapshot this contribution was recorded from.';

COMMENT ON COLUMN contribution.voting_key IS 'The voting key.  If this is NULL it is the raw staked ADA.';
COMMENT ON COLUMN contribution.voting_weight IS 'The weight this voting key gets of the total.';
COMMENT ON COLUMN contribution.voting_key_idx IS 'The index from 0 of the keys in the delegation array.';
COMMENT ON COLUMN contribution.value IS 'The amount of ADA contributed to this voting key from the stake address';

COMMENT ON COLUMN contribution.voting_group IS 'The group this contribution goes to.';

COMMENT ON COLUMN contribution.reward_address IS 'Currently Unused.  Should be the Stake Rewards address of the voter (currently unknown.)';

</code></pre>
<h2 id="vote-schema"><a class="header" href="#vote-schema">Vote Schema</a></h2>
<pre><code class="language-sql">-- Catalyst Event Database - VIT-SS Compatibility

-- vote storage (replicates on-chain data for easy querying)

CREATE TABLE ballot (
    row_id SERIAL8 PRIMARY KEY,
    objective      INTEGER NOT NULL,
    proposal       INTEGER NULL,

    voter          INTEGER NOT NULL,
    fragment_id    TEXT NOT NULL,
    cast_at        TIMESTAMP NOT NULL,
    choice         SMALLINT NULL,
    raw_fragment   BYTEA    NOT NULL,

    FOREIGN KEY(voter)               REFERENCES voter(row_id)  ON DELETE CASCADE,
    FOREIGN KEY(objective)           REFERENCES objective(row_id)  ON DELETE CASCADE,
    FOREIGN KEY(proposal)            REFERENCES proposal(row_id)  ON DELETE CASCADE
);

CREATE UNIQUE INDEX ballot_proposal_idx  ON ballot(proposal,fragment_id);
CREATE UNIQUE INDEX ballot_objective_idx ON ballot(objective,fragment_id);

COMMENT ON TABLE ballot IS 'All Ballots cast on an event.';
COMMENT ON COLUMN ballot.fragment_id is 'Unique ID of this Ballot';
COMMENT ON COLUMN ballot.voter is 'Reference to the Voter who cast the ballot';
COMMENT ON COLUMN ballot.objective is 'Reference to the Objective the ballot was for.';
COMMENT ON COLUMN ballot.proposal is
'Reference to the Proposal the ballot was for.
May be NULL if this ballot covers ALL proposals in the challenge.';
COMMENT ON COLUMN ballot.cast_at is 'When this ballot was recorded as properly cast';
COMMENT ON COLUMN ballot.choice is 'If a public vote, the choice on the ballot, otherwise NULL.';
COMMENT ON COLUMN ballot.raw_fragment is 'The raw ballot record.';

</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/input-output-hk/catalyst-core/edit/main/book/src/08_event-db/06_snapshot_tables.md">Edit this page on GitHub.</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../08_event-db/05_vote_plans.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../08_event-db/07_automation_support.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../08_event-db/05_vote_plans.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../08_event-db/07_automation_support.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
